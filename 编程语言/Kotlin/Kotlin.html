<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 8.0.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha256-VHqXKFhhMxcpubYf9xiWdCiojEbY9NexQ4jh8AxbvcM=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"cmder.github.io","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.25.0","exturl":false,"sidebar":{"position":"right","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"atom-one-light","dark":"atom-one-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="语法树">
<meta property="og:type" content="article">
<meta property="og:title" content="Kotlin">
<meta property="og:url" content="https://cmder.github.io/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Kotlin/Kotlin.html">
<meta property="og:site_name" content="说码解字">
<meta property="og:description" content="语法树">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-03-09T09:36:34.000Z">
<meta property="article:modified_time" content="2025-10-14T14:00:23.769Z">
<meta property="article:author" content="Bruce Yao">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://cmder.github.io/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Kotlin/Kotlin.html">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://cmder.github.io/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Kotlin/Kotlin.html","path":"编程语言/Kotlin/Kotlin.html","title":"Kotlin"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Kotlin | 说码解字</title>
  








  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script><script src="/js/pjax.js" defer></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.5.0/search.js" integrity="sha256-xFC6PJ82SL9b3WkGjFavNiA9gm5z6UBxWPiu4CYjptg=" crossorigin="anonymous" defer></script>
<script src="/js/third-party/search/local-search.js" defer></script>


  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"forest","dark":"dark"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.10.1/mermaid.min.js","integrity":"sha256-BmQmdWDS8X2OTbrwELWK366LV6escyWhHHe0XCTU/Hk="}}</script>
  <script src="/js/third-party/tags/mermaid.js" defer></script>





  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js" defer></script>



  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">说码解字</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95%E6%A0%91"><span class="nav-number">1.</span> <span class="nav-text">语法树</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%AF%A6%E8%A7%A3"><span class="nav-number">2.</span> <span class="nav-text">详解</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E7%89%B9%E6%80%A7"><span class="nav-number">2.1.</span> <span class="nav-text">一、基础语法特性</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">2.1.1.</span> <span class="nav-text">1. 基本数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B4%E5%9E%8Bbyte-short-int-long"><span class="nav-number">2.1.1.1.</span> <span class="nav-text">1.1 整型：Byte,
Short, Int, Long</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B5%AE%E7%82%B9%E5%9E%8Bfloat-double"><span class="nav-number">2.1.1.2.</span> <span class="nav-text">1.2 浮点型：Float,
Double</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E5%9E%8Bchar"><span class="nav-number">2.1.1.3.</span> <span class="nav-text">1.3 字符型：Char</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%83%E5%B0%94%E5%9E%8Bboolean"><span class="nav-number">2.1.1.4.</span> <span class="nav-text">1.4 布尔型：Boolean</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%98%E9%87%8F%E4%B8%8E%E5%B8%B8%E9%87%8F"><span class="nav-number">2.1.2.</span> <span class="nav-text">2. 变量与常量</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%98%E9%87%8Fvar"><span class="nav-number">2.1.2.1.</span> <span class="nav-text">2.1 变量：var</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%B8%E9%87%8Fval"><span class="nav-number">2.1.2.2.</span> <span class="nav-text">2.2 常量：val</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">2.1.3.</span> <span class="nav-text">3. 运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97%E7%AC%A6--"><span class="nav-number">2.1.3.1.</span> <span class="nav-text">3.1 算术运算符：+, -,
*, &#x2F;, %</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">2.1.3.2.</span> <span class="nav-text">3.2 关系运算符：&#x3D;&#x3D;, !&#x3D;,
&lt;, &gt;, &lt;&#x3D;,
&gt;&#x3D;</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">2.1.3.3.</span> <span class="nav-text">3.3 逻辑运算符：&amp;&amp;,
||, !</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%8D%E8%BF%90%E7%AE%97%E7%AC%A6and-or-xor-shl-shr"><span class="nav-number">2.1.3.4.</span> <span class="nav-text">3.4 位运算符：and,
or, xor, shl,
shr</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97%E7%AC%A6--"><span class="nav-number">2.1.3.5.</span> <span class="nav-text">3.5 赋值运算符：&#x3D;, +&#x3D;,
-&#x3D;, *&#x3D;, &#x2F;&#x3D;</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E8%BF%90%E7%AE%97%E7%AC%A6-.-in"><span class="nav-number">2.1.3.6.</span> <span class="nav-text">3.6 其他运算符：?:,
?., !!, in</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%A7%E5%88%B6%E7%BB%93%E6%9E%84"><span class="nav-number">2.1.4.</span> <span class="nav-text">4. 控制结构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5if-else"><span class="nav-number">2.1.4.1.</span> <span class="nav-text">4.1 条件语句：if,
else</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%86%E6%94%AF%E8%AF%AD%E5%8F%A5when"><span class="nav-number">2.1.4.2.</span> <span class="nav-text">4.2 分支语句：when</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BE%AA%E7%8E%AFfor-while-do-while"><span class="nav-number">2.1.4.3.</span> <span class="nav-text">4.3 循环：for,
while, do-while</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B7%B3%E8%BD%ACbreak-continue-return"><span class="nav-number">2.1.4.4.</span> <span class="nav-text">4.4 跳转：break,
continue, return</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BD%E6%95%B0"><span class="nav-number">2.1.5.</span> <span class="nav-text">5. 函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E5%AE%9A%E4%B9%89fun"><span class="nav-number">2.1.5.1.</span> <span class="nav-text">5.1 函数定义：fun</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%82%E6%95%B0%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0-vararg"><span class="nav-number">2.1.5.2.</span> <span class="nav-text">5.2 参数：默认参数,
vararg</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8D%95%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%87%BD%E6%95%B0"><span class="nav-number">2.1.5.3.</span> <span class="nav-text">5.3 单表达式函数：&#x3D;</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0"><span class="nav-number">2.1.5.4.</span> <span class="nav-text">5.4 匿名函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0"><span class="nav-number">2.1.5.5.</span> <span class="nav-text">5.5 高阶函数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1"><span class="nav-number">2.1.6.</span> <span class="nav-text">6. 类与对象</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B1%BB%E5%AE%9A%E4%B9%89class"><span class="nav-number">2.1.6.1.</span> <span class="nav-text">6.1 类定义：class</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0constructor"><span class="nav-number">2.1.6.2.</span> <span class="nav-text">6.2 构造函数：constructor</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B1%9E%E6%80%A7var-val"><span class="nav-number">2.1.6.3.</span> <span class="nav-text">6.3 属性：var, val</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6public-private-protected-internal"><span class="nav-number">2.1.6.4.</span> <span class="nav-text">6.4
访问控制：public, private,
protected, internal</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%A7%E6%89%BFopen"><span class="nav-number">2.1.6.5.</span> <span class="nav-text">6.5 继承：open, :</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8E%A5%E5%8F%A3interface"><span class="nav-number">2.1.6.6.</span> <span class="nav-text">6.6 接口：interface</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8A%BD%E8%B1%A1%E7%B1%BBabstract"><span class="nav-number">2.1.6.7.</span> <span class="nav-text">6.7 抽象类：abstract</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BBdata"><span class="nav-number">2.1.6.8.</span> <span class="nav-text">6.8 数据类：data</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AF%B9%E8%B1%A1%E5%A3%B0%E6%98%8Eobject"><span class="nav-number">2.1.6.9.</span> <span class="nav-text">6.9 对象声明：object</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BC%B4%E7%94%9F%E5%AF%B9%E8%B1%A1companion-object"><span class="nav-number">2.1.6.10.</span> <span class="nav-text">6.10
伴生对象：companion object</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8C%85%E4%B8%8E%E5%AF%BC%E5%85%A5"><span class="nav-number">2.1.7.</span> <span class="nav-text">7. 包与导入</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8C%85%E5%AE%9A%E4%B9%89package"><span class="nav-number">2.1.7.1.</span> <span class="nav-text">7.1 包定义：package</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AF%BC%E5%85%A5import"><span class="nav-number">2.1.7.2.</span> <span class="nav-text">7.2 导入：import</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="nav-number">2.1.8.</span> <span class="nav-text">8. 异常处理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#try-catch-finally"><span class="nav-number">2.1.8.1.</span> <span class="nav-text">8.1 try, catch,
finally</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#throw"><span class="nav-number">2.1.8.2.</span> <span class="nav-text">8.2 throw</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%9B%E5%9E%8B"><span class="nav-number">2.1.9.</span> <span class="nav-text">9. 泛型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%9B%E5%9E%8B%E7%B1%BBt"><span class="nav-number">2.1.9.1.</span> <span class="nav-text">9.1 泛型类：&lt;T&gt;</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%9B%E5%9E%8B%E5%87%BD%E6%95%B0"><span class="nav-number">2.1.9.2.</span> <span class="nav-text">9.2 泛型函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8D%8F%E5%8F%98out"><span class="nav-number">2.1.9.3.</span> <span class="nav-text">9.3 协变：out</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%86%E5%8F%98in"><span class="nav-number">2.1.9.4.</span> <span class="nav-text">9.4 逆变：in</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E9%85%8D%E7%AC%A6"><span class="nav-number">2.1.9.5.</span> <span class="nav-text">9.5 通配符：*</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A9%BA%E5%AE%89%E5%85%A8"><span class="nav-number">2.1.10.</span> <span class="nav-text">10. 空安全</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%AF%E7%A9%BA%E7%B1%BB%E5%9E%8B"><span class="nav-number">2.1.10.1.</span> <span class="nav-text">10.1 可空类型：?</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E5%85%A8%E8%B0%83%E7%94%A8."><span class="nav-number">2.1.10.2.</span> <span class="nav-text">10.2 安全调用：?.</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#elvis-%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-number">2.1.10.3.</span> <span class="nav-text">10.3 Elvis 操作符：?:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9D%9E%E7%A9%BA%E6%96%AD%E8%A8%80"><span class="nav-number">2.1.10.4.</span> <span class="nav-text">10.4 非空断言：!!</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E8%A7%A3"><span class="nav-number">2.1.11.</span> <span class="nav-text">11. 注解</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%86%85%E7%BD%AE%E6%B3%A8%E8%A7%A3"><span class="nav-number">2.1.11.1.</span> <span class="nav-text">11.1 内置注解</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#deprecated"><span class="nav-number">2.1.11.1.1.</span> <span class="nav-text">@Deprecated</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#suppress"><span class="nav-number">2.1.11.1.2.</span> <span class="nav-text">@Suppress</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#jvmoverloads"><span class="nav-number">2.1.11.1.3.</span> <span class="nav-text">@JvmOverloads</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#jvmstatic"><span class="nav-number">2.1.11.1.4.</span> <span class="nav-text">@JvmStatic</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#jvmfield"><span class="nav-number">2.1.11.1.5.</span> <span class="nav-text">@JvmField</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#throws"><span class="nav-number">2.1.11.1.6.</span> <span class="nav-text">@Throws</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#jvmname"><span class="nav-number">2.1.11.1.7.</span> <span class="nav-text">@JvmName</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#jvmmultifileclass"><span class="nav-number">2.1.11.1.8.</span> <span class="nav-text">@JvmMultifileClass</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#synchronized"><span class="nav-number">2.1.11.1.9.</span> <span class="nav-text">@Synchronized</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#volatile"><span class="nav-number">2.1.11.1.10.</span> <span class="nav-text">@Volatile</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#strictfp"><span class="nav-number">2.1.11.1.11.</span> <span class="nav-text">@Strictfp</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#publishedapi"><span class="nav-number">2.1.11.1.12.</span> <span class="nav-text">@PublishedApi</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#sincekotlin"><span class="nav-number">2.1.11.1.13.</span> <span class="nav-text">@SinceKotlin</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#optin"><span class="nav-number">2.1.11.1.14.</span> <span class="nav-text">@OptIn</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#filejvmname"><span class="nav-number">2.1.11.1.15.</span> <span class="nav-text">@file:JvmName</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#filesuppress"><span class="nav-number">2.1.11.1.16.</span> <span class="nav-text">@file:Suppress</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%8C%E6%95%B4%E7%A4%BA%E4%BE%8B%E6%95%B4%E5%90%88"><span class="nav-number">2.1.11.1.17.</span> <span class="nav-text">完整示例整合</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3annotation"><span class="nav-number">2.1.11.2.</span> <span class="nav-text">11.2
自定义注解：annotation</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E7%8E%B0%E4%BB%A3-kotlin-%E6%96%B0%E7%89%B9%E6%80%A7"><span class="nav-number">2.2.</span> <span class="nav-text">二、现代 Kotlin 新特性</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#kotlin-1.0"><span class="nav-number">2.2.1.</span> <span class="nav-text">1. Kotlin 1.0+</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#lambda-%E8%A1%A8%E8%BE%BE%E5%BC%8F-x---x-2"><span class="nav-number">2.2.1.1.</span> <span class="nav-text">1.1 Lambda
表达式：{ x -&gt; x * 2 }</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%89%A9%E5%B1%95%E5%87%BD%E6%95%B0"><span class="nav-number">2.2.1.2.</span> <span class="nav-text">1.2 扩展函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%AD%E7%BC%80%E5%87%BD%E6%95%B0infix"><span class="nav-number">2.2.1.3.</span> <span class="nav-text">1.3 中缀函数：infix</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BDoperator"><span class="nav-number">2.2.1.4.</span> <span class="nav-text">1.4 运算符重载：operator</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#kotlin-1.1"><span class="nav-number">2.2.2.</span> <span class="nav-text">2. Kotlin 1.1</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8D%8F%E7%A8%8Bsuspend-launch"><span class="nav-number">2.2.2.1.</span> <span class="nav-text">2.1 协程：suspend,
launch</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#kotlin-1.3"><span class="nav-number">2.2.3.</span> <span class="nav-text">3. Kotlin 1.3</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%86%85%E8%81%94%E7%B1%BBinline-class"><span class="nav-number">2.2.3.1.</span> <span class="nav-text">3.1 内联类：inline class</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%97%A0%E7%AC%A6%E5%8F%B7%E6%95%B4%E6%95%B0uint-ulong"><span class="nav-number">2.2.3.2.</span> <span class="nav-text">3.2 无符号整数：UInt,
ULong</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#kotlin-1.4"><span class="nav-number">2.2.4.</span> <span class="nav-text">4. Kotlin 1.4</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#sam-%E8%BD%AC%E6%8D%A2%E6%94%B9%E8%BF%9B"><span class="nav-number">2.2.4.1.</span> <span class="nav-text">4.1 SAM 转换改进</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B0%BE%E9%9A%8F%E9%80%97%E5%8F%B7"><span class="nav-number">2.2.4.2.</span> <span class="nav-text">4.2 尾随逗号</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#kotlin-1.5"><span class="nav-number">2.2.5.</span> <span class="nav-text">5. Kotlin 1.5</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AF%86%E5%B0%81%E6%8E%A5%E5%8F%A3sealed-interface"><span class="nav-number">2.2.5.1.</span> <span class="nav-text">5.1
密封接口：sealed interface</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%86%85%E8%81%94%E5%80%BC%E7%B1%BBvalue-class"><span class="nav-number">2.2.5.2.</span> <span class="nav-text">5.2 内联值类：value class</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#kotlin-1.6"><span class="nav-number">2.2.6.</span> <span class="nav-text">6. Kotlin 1.6</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8C%82%E8%B5%B7%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8Bsuspend---unit"><span class="nav-number">2.2.6.1.</span> <span class="nav-text">6.1
挂起函数类型：suspend () -&gt; Unit</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#kotlin-1.8"><span class="nav-number">2.2.7.</span> <span class="nav-text">7. Kotlin 1.8</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8A%E4%B8%8B%E6%96%87%E6%8E%A5%E6%94%B6%E8%80%85context"><span class="nav-number">2.2.7.1.</span> <span class="nav-text">7.1 上下文接收者：context</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#kotlin-1.9"><span class="nav-number">2.2.8.</span> <span class="nav-text">8. Kotlin 1.9+</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%9A%E5%B9%B3%E5%8F%B0%E6%94%B9%E8%BF%9B"><span class="nav-number">2.2.8.1.</span> <span class="nav-text">8.1 多平台改进</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#k2-%E7%BC%96%E8%AF%91%E5%99%A8%E7%89%B9%E6%80%A7"><span class="nav-number">2.2.8.2.</span> <span class="nav-text">8.2 K2 编译器特性</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E5%85%B6%E4%BB%96%E7%89%B9%E6%80%A7"><span class="nav-number">2.3.</span> <span class="nav-text">三、其他特性</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%87%E5%87%86%E5%BA%93%E6%89%A9%E5%B1%95"><span class="nav-number">2.3.1.</span> <span class="nav-text">1. 标准库扩展</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9B%86%E5%90%88list-set-map"><span class="nav-number">2.3.1.1.</span> <span class="nav-text">1.1 集合：List, Set,
Map</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2string-stringbuilder"><span class="nav-number">2.3.1.2.</span> <span class="nav-text">1.2 字符串：String,
StringBuilder</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#iojava.io"><span class="nav-number">2.3.1.3.</span> <span class="nav-text">1.3 IO：java.io</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B9%B6%E5%8F%91kotlin.coroutines"><span class="nav-number">2.3.1.4.</span> <span class="nav-text">1.4
并发：kotlin.coroutines</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%8D%E5%B0%84%E4%B8%8E%E8%BF%90%E8%A1%8C%E6%97%B6"><span class="nav-number">2.3.2.</span> <span class="nav-text">2. 反射与运行时</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B1%BB%E5%BC%95%E7%94%A8class"><span class="nav-number">2.3.2.1.</span> <span class="nav-text">2.1 类引用：::class</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E5%BC%95%E7%94%A8function"><span class="nav-number">2.3.2.2.</span> <span class="nav-text">2.2 函数引用：::function</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%8D%E5%B0%84%E5%BA%93kotlin.reflect"><span class="nav-number">2.3.2.3.</span> <span class="nav-text">2.3
反射库：kotlin.reflect</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A7%94%E6%89%98"><span class="nav-number">2.3.3.</span> <span class="nav-text">3. 委托</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B1%9E%E6%80%A7%E5%A7%94%E6%89%98by-lazy-by-delegates"><span class="nav-number">2.3.3.1.</span> <span class="nav-text">3.1
属性委托：by lazy, by Delegates</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B1%BB%E5%A7%94%E6%89%98by"><span class="nav-number">2.3.3.2.</span> <span class="nav-text">3.2 类委托：by</span></a></li></ol></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Bruce Yao"
      src="/uploads/avatar.jpg">
  <p class="site-author-name" itemprop="name">Bruce Yao</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">66</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">23</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/cmder" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;cmder" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:cmd100000@gmail.com" title="E-Mail → mailto:cmd100000@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cmder.github.io/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Kotlin/Kotlin.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="Bruce Yao">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="说码解字">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Kotlin | 说码解字">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Kotlin
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-03-09 17:36:34" itemprop="dateCreated datePublished" datetime="2025-03-09T17:36:34+08:00">2025-03-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-10-14 22:00:23" itemprop="dateModified" datetime="2025-10-14T22:00:23+08:00">2025-10-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index"><span itemprop="name">编程语言</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Kotlin/" itemprop="url" rel="index"><span itemprop="name">Kotlin</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="语法树">语法树</h1>
<pre><code class="highlight mermaid">graph LR
    A[Kotlin 语法概览]

    %% 1. 基础语法特性
    A --&gt; B[基础语法特性]
    B --&gt; B1[基本数据类型]
    B1 --&gt; B1a[&quot;整型: Byte, Short, Int, Long&quot;]
    B1 --&gt; B1b[&quot;浮点型: Float, Double&quot;]
    B1 --&gt; B1c[&quot;字符型: Char&quot;]
    B1 --&gt; B1d[&quot;布尔型: Boolean&quot;]
    
    B --&gt; B2[变量与常量]
    B2 --&gt; B2a[&quot;变量: var&quot;]
    B2 --&gt; B2b[&quot;常量: val&quot;]
    
    B --&gt; B3[运算符]
    B3 --&gt; B3a[&quot;算术运算符: +, -, *, /, %&quot;]
    B3 --&gt; B3b[&quot;关系运算符: ==, !=, &amp;lt;, &amp;gt;, &amp;lt;=, &amp;gt;=&quot;]
    B3 --&gt; B3c[&quot;逻辑运算符: &amp;amp;&amp;amp;, ||, !&quot;]
    B3 --&gt; B3d[&quot;位运算符: and, or, xor, shl, shr&quot;]
    B3 --&gt; B3e[&quot;赋值运算符: =, +=, -=, *=, /=&quot;]
    B3 --&gt; B3f[&quot;其他: Elvis ?:, Safe Call ?., !!, in&quot;]
    
    B --&gt; B4[控制结构]
    B4 --&gt; B4a[&quot;条件语句: if, else&quot;]
    B4 --&gt; B4b[&quot;分支语句: when&quot;]
    B4 --&gt; B4c[&quot;循环: for, while, do-while&quot;]
    B4 --&gt; B4d[&quot;跳转: break, continue, return&quot;]
    
    B --&gt; B5[函数]
    B5 --&gt; B5a[&quot;函数定义: fun&quot;]
    B5 --&gt; B5b[&quot;参数: 默认参数, 可变参数 vararg&quot;]
    B5 --&gt; B5c[&quot;单表达式函数: =&quot;]
    B5 --&gt; B5d[&quot;匿名函数&quot;]
    B5 --&gt; B5e[&quot;高阶函数&quot;]
    
    B --&gt; B6[类与对象]
    B6 --&gt; B6a[&quot;类定义: class&quot;]
    B6 --&gt; B6b[&quot;构造函数: constructor&quot;]
    B6 --&gt; B6c[&quot;属性: var, val&quot;]
    B6 --&gt; B6d[&quot;访问控制: public, private, protected, internal&quot;]
    B6 --&gt; B6e[&quot;继承: open, :&quot;]
    B6 --&gt; B6f[&quot;接口: interface&quot;]
    B6 --&gt; B6g[&quot;抽象类: abstract&quot;]
    B6 --&gt; B6h[&quot;数据类: data&quot;]
    B6 --&gt; B6i[&quot;对象声明: object&quot;]
    B6 --&gt; B6j[&quot;伴生对象: companion object&quot;]
    
    B --&gt; B7[包与导入]
    B7 --&gt; B7a[&quot;包定义: package&quot;]
    B7 --&gt; B7b[&quot;导入: import&quot;]
    
    B --&gt; B8[异常处理]
    B8 --&gt; B8a[&quot;try, catch, finally&quot;]
    B8 --&gt; B8b[&quot;throw&quot;]
    
    B --&gt; B9[泛型]
    B9 --&gt; B9a[&quot;泛型类: &amp;lt;T&amp;gt;&quot;]
    B9 --&gt; B9b[&quot;泛型函数&quot;]
    B9 --&gt; B9c[&quot;协变: out&quot;]
    B9 --&gt; B9d[&quot;逆变: in&quot;]
    B9 --&gt; B9e[&quot;通配符: *&quot;]
    
	B --&gt; B10[空安全]
    B10 --&gt; B10a[&quot;可空类型: ?&quot;]
    B10 --&gt; B10b[&quot;安全调用: ?.&quot;]
    B10 --&gt; B10c[&quot;Elvis 操作符: ?:&quot;]
    B10 --&gt; B10d[&quot;非空断言: !!&quot;]
    
    B --&gt; B11[注解]
    B11 --&gt; B11a[&quot;内置注解: @Deprecated, @Suppress&quot;]
    B11 --&gt; B11b[&quot;自定义注解: annotation&quot;]

    %% 2. 现代 Kotlin 新特性
    A --&gt; C[现代 Kotlin 新特性]
    
    C --&gt; C1[Kotlin 1.0+]
    C1 --&gt; C1a[&quot;Lambda 表达式: &#123; x -&gt; x * 2 &#125;&quot;]
    C1 --&gt; C1b[&quot;扩展函数&quot;]
    C1 --&gt; C1c[&quot;中缀函数: infix&quot;]
    C1 --&gt; C1d[&quot;运算符重载: operator&quot;]
    
    C --&gt; C2[Kotlin 1.1]
    C2 --&gt; C2a[&quot;协程: suspend, launch&quot;]
    
    C --&gt; C3[Kotlin 1.3]
    C3 --&gt; C3a[&quot;内联类: inline class&quot;]
    C3 --&gt; C3b[&quot;无符号整数: UInt, ULong&quot;]
    
    C --&gt; C4[Kotlin 1.4]
    C4 --&gt; C4a[&quot;SAM 转换改进&quot;]
    C4 --&gt; C4b[&quot;尾随逗号&quot;]
    
    C --&gt; C5[Kotlin 1.5]
    C5 --&gt; C5a[&quot;密封接口: sealed interface&quot;]
    C5 --&gt; C5b[&quot;内联值类: value class&quot;]
    
    C --&gt; C6[Kotlin 1.6]
    C6 --&gt; C6a[&quot;挂起函数类型: suspend () -&gt; Unit&quot;]
    
    C --&gt; C7[Kotlin 1.8]
    C7 --&gt; C7a[&quot;上下文接收者: context&quot;]
    
    C --&gt; C8[Kotlin 1.9+]
    C8 --&gt; C8a[&quot;多平台改进&quot;]
    C8 --&gt; C8b[&quot;K2 编译器特性&quot;]

    %% 3. 其他特性
    A --&gt; D[其他特性]
    D --&gt; D1[标准库扩展]
    D1 --&gt; D1a[&quot;集合: List, Set, Map&quot;]
    D1 --&gt; D1b[&quot;字符串: String, StringBuilder&quot;]
    D1 --&gt; D1c[&quot;IO: java.io&quot;]
    D1 --&gt; D1d[&quot;并发: kotlin.coroutines&quot;]
    
    D --&gt; D2[反射与运行时]
    D2 --&gt; D2a[&quot;类引用: ::class&quot;]
    D2 --&gt; D2b[&quot;函数引用: ::function&quot;]
    D2 --&gt; D2c[&quot;反射库: kotlin.reflect&quot;]
    
    D --&gt; D3[委托]
    D3 --&gt; D3a[&quot;属性委托: by lazy, by Delegates&quot;]
    D3 --&gt; D3b[&quot;类委托: by&quot;]</code></pre>
<h1 id="详解">详解</h1>
<h2 id="一基础语法特性">一、基础语法特性</h2>
<h3 id="基本数据类型">1. 基本数据类型</h3>
<h4 id="整型byte-short-int-long">1.1 整型：<code>Byte</code>,
<code>Short</code>, <code>Int</code>, <code>Long</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li><code>Byte</code>：8 位有符号整数，范围 <code>-128</code> 到
<code>127</code>，显式声明为 <code>Byte</code>。</li>
<li><code>Short</code>：16 位有符号整数，范围 <code>-32768</code> 到
<code>32767</code>，显式声明为 <code>Short</code>。</li>
<li><code>Int</code>：32 位有符号整数，范围 <code>-2,147,483,648</code>
到 <code>2,147,483,647</code>，默认整数类型。</li>
<li><code>Long</code>：64 位有符号整数，范围
<code>-9,223,372,036,854,775,808</code> 到
<code>9,223,372,036,854,775,807</code>，需加 <code>L</code> 后缀。</li>
<li>支持类型推断，如 <code>val x = 42</code> 推断为
<code>Int</code>。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li><code>Byte</code>：节省内存，适用于小型数据（如网络协议中的标志位、图像像素值）。</li>
<li><code>Short</code>：较少使用，适用于特定硬件接口或与旧系统交互。</li>
<li><code>Int</code>：日常计数、数组索引、循环变量。</li>
<li><code>Long</code>：大范围数据，如时间戳（毫秒）、文件大小、数据库
ID。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>在 JVM 上，分别映射为 Java 的
<code>byte</code>、<code>short</code>、<code>int</code>、<code>long</code>，为原始类型以优化性能。</li>
<li>当声明为可空类型（如 <code>Int?</code>）或用于泛型时，装箱为
<code>java.lang.Byte</code>、<code>Short</code>、<code>Integer</code>、<code>Long</code>。</li>
<li>编译器优化字面量，例如 <code>val x = 42</code> 使用
<code>int</code>，避免不必要的对象创建。</li>
<li>类型转换需显式调用方法（如
<code>toInt()</code>），避免隐式转换错误。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> byte: <span class="built_in">Byte</span> = <span class="number">127</span></span><br><span class="line">    <span class="keyword">val</span> short: <span class="built_in">Short</span> = <span class="number">32_767</span></span><br><span class="line">    <span class="keyword">val</span> int: <span class="built_in">Int</span> = <span class="number">2_147_483_647</span></span><br><span class="line">    <span class="keyword">val</span> long: <span class="built_in">Long</span> = <span class="number">9_223_372_036_854_775_807L</span></span><br><span class="line">    println(<span class="string">&quot;Byte: <span class="variable">$byte</span>, Short: <span class="variable">$short</span>, Int: <span class="variable">$int</span>, Long: <span class="variable">$long</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 类型转换</span></span><br><span class="line">    <span class="keyword">val</span> byteToInt: <span class="built_in">Int</span> = byte.toInt()</span><br><span class="line">    println(<span class="string">&quot;Byte to Int: <span class="variable">$byteToInt</span>&quot;</span>)  <span class="comment">// 127</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 溢出示例</span></span><br><span class="line">    <span class="keyword">val</span> overflow: <span class="built_in">Byte</span> = (byte + <span class="number">1</span>).toByte()  <span class="comment">// 127 + 1 = -128（溢出）</span></span><br><span class="line">    println(<span class="string">&quot;Overflow Byte: <span class="variable">$overflow</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 可空类型</span></span><br><span class="line">    <span class="keyword">val</span> nullableLong: <span class="built_in">Long</span>? = <span class="literal">null</span></span><br><span class="line">    println(<span class="string">&quot;Nullable Long: <span class="variable">$nullableLong</span>&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>溢出风险</strong>：<code>Byte</code> 和 <code>Short</code>
操作超出范围不会自动提升类型，需手动转换（如
<code>(byte + 1).toByte()</code>），否则溢出（如 127 + 1 = -128）。</li>
<li><strong>类型转换</strong>：必须显式转换（如
<code>toInt()</code>），否则编译错误，避免隐式转换导致的意外。</li>
<li><strong>性能</strong>：优先使用 <code>Int</code>，因为它是 JVM
的默认整数类型，<code>Byte</code> 和 <code>Short</code>
在某些场景可能因装箱而降低性能。</li>
<li><strong><code>L</code> 后缀</strong>：<code>Long</code> 字面量忘记加
<code>L</code> 会默认推断为 <code>Int</code>，可能导致溢出。</li>
</ul></li>
</ul>
<h4 id="浮点型float-double">1.2 浮点型：<code>Float</code>,
<code>Double</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li><code>Float</code>：32 位单精度浮点数，约 6-7 位有效数字，需加
<code>f</code> 或 <code>F</code> 后缀（如 <code>3.14f</code>）。</li>
<li><code>Double</code>：64 位双精度浮点数，约 15-16
位有效数字，默认浮点类型（如 <code>3.14</code>）。</li>
<li>支持科学计数法（如 <code>1.23e-4</code>）。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li><code>Float</code>：节省内存，适用于图形渲染（如 OpenGL
坐标）、低精度计算。</li>
<li><code>Double</code>：高精度计算，如科学计算、财务数据处理、地理坐标。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>遵循 IEEE 754 标准，包含 1 位符号、指数位（<code>Float</code> 8
位，<code>Double</code> 11 位）和尾数位（<code>Float</code> 23
位，<code>Double</code> 52 位）。</li>
<li>在 JVM 上，<code>Float</code> 映射为
<code>float</code>，<code>Double</code> 映射为
<code>double</code>，可空时装箱为 <code>java.lang.Float</code> 和
<code>Double</code>。</li>
<li>运算结果可能因舍入而有微小误差。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> float: <span class="built_in">Float</span> = <span class="number">3.14159f</span></span><br><span class="line">    <span class="keyword">val</span> double: <span class="built_in">Double</span> = <span class="number">3.141592653589793</span></span><br><span class="line">    println(<span class="string">&quot;Float: <span class="variable">$float</span>, Double: <span class="variable">$double</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 科学计数法</span></span><br><span class="line">    <span class="keyword">val</span> sciFloat: <span class="built_in">Float</span> = <span class="number">1.23e2f</span>  <span class="comment">// 123.0</span></span><br><span class="line">    println(<span class="string">&quot;Scientific Float: <span class="variable">$sciFloat</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 精度问题</span></span><br><span class="line">    <span class="keyword">val</span> sumFloat = <span class="number">0.1f</span> + <span class="number">0.2f</span></span><br><span class="line">    println(<span class="string">&quot;Float 0.1 + 0.2 = <span class="variable">$sumFloat</span>&quot;</span>)  <span class="comment">// 0.300000004（误差）</span></span><br><span class="line">    <span class="keyword">val</span> sumDouble = <span class="number">0.1</span> + <span class="number">0.2</span></span><br><span class="line">    println(<span class="string">&quot;Double 0.1 + 0.2 = <span class="variable">$sumDouble</span>&quot;</span>)  <span class="comment">// 0.30000000000000004（更高精度）</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 类型转换</span></span><br><span class="line">    <span class="keyword">val</span> floatToDouble: <span class="built_in">Double</span> = float.toDouble()</span><br><span class="line">    println(<span class="string">&quot;Float to Double: <span class="variable">$floatToDouble</span>&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>精度问题</strong>：浮点运算可能有舍入误差（如
<code>0.1 + 0.2 != 0.3</code>），避免直接用 <code>==</code>
比较，建议用范围检查（如 <code>abs(a - b) &lt; 0.0001</code>）。</li>
<li><strong><code>f</code> 后缀</strong>：<code>Float</code>
字面量忘记加 <code>f</code> 会推断为
<code>Double</code>，导致类型不匹配。</li>
<li><strong>性能与内存</strong>：<code>Float</code>
节省内存，但精度低，<code>Double</code> 更适合高精度需求。</li>
<li><strong>溢出与无穷</strong>：除以 0 返回 <code>Infinity</code>
而非异常，需检查结果。</li>
</ul></li>
</ul>
<h4 id="字符型char">1.3 字符型：<code>Char</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>表示 16 位 Unicode 字符，使用单引号定义（如
<code>'A'</code>）。</li>
<li>支持转义字符（如 <code>\n</code>, <code>\t</code>）和 Unicode
码点（如 <code>\u0041</code> 表示 <code>'A'</code>）。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>文本解析（如逐字符处理字符串）。</li>
<li>表示单个按键输入或编码转换。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>映射到 JVM 的 <code>char</code>，存储为 16 位无符号整数（0 到
65535）。</li>
<li>可空时装箱为 <code>java.lang.Character</code>。</li>
<li>支持与整数运算，基于 Unicode 码点。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> char: <span class="built_in">Char</span> = <span class="string">&#x27;K&#x27;</span></span><br><span class="line">    <span class="keyword">val</span> unicodeChar: <span class="built_in">Char</span> = <span class="string">&#x27;\u004B&#x27;</span>  <span class="comment">// &#x27;K&#x27;</span></span><br><span class="line">    println(<span class="string">&quot;Char: <span class="variable">$char</span>, Unicode: <span class="variable">$unicodeChar</span>, Code: <span class="subst">$&#123;char.code&#125;</span>&quot;</span>)  <span class="comment">// K, K, 75</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 转义字符</span></span><br><span class="line">    <span class="keyword">val</span> newline: <span class="built_in">Char</span> = <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">    print(<span class="string">&quot;Line1<span class="subst">$&#123;newline&#125;</span>Line2&quot;</span>)  <span class="comment">// Line1换行Line2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 字符运算</span></span><br><span class="line">    <span class="keyword">val</span> nextChar = char + <span class="number">1</span>  <span class="comment">// &#x27;L&#x27;</span></span><br><span class="line">    println(<span class="string">&quot;Next Char: <span class="variable">$nextChar</span>&quot;</span>)  <span class="comment">// L</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 可空类型</span></span><br><span class="line">    <span class="keyword">val</span> nullableChar: <span class="built_in">Char</span>? = <span class="literal">null</span></span><br><span class="line">    println(<span class="string">&quot;Nullable Char: <span class="variable">$nullableChar</span>&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>与数字区分</strong>：<code>Char</code>
不能直接当作整数使用，需用 <code>.code</code> 转换。</li>
<li><strong>单引号</strong>：使用双引号（如 <code>"A"</code>）会推断为
<code>String</code>，导致类型错误。</li>
<li><strong>范围限制</strong>：超出 Unicode 范围（如 <code>\uFFFF</code>
以上）无效。</li>
<li><strong>运算结果</strong>：<code>Char</code> 加减返回
<code>Int</code>，需转换回 <code>Char</code>。</li>
</ul></li>
</ul>
<h4 id="布尔型boolean">1.4 布尔型：<code>Boolean</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>表示 <code>true</code> 或 <code>false</code>，用于逻辑判断。</li>
<li>可声明为可空类型（如 <code>Boolean?</code>）。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>条件判断（如 <code>if</code> 语句）。</li>
<li>状态标志（如 <code>isActive</code>）。</li>
<li>三态逻辑（true, false, null）。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>映射到 JVM 的 <code>boolean</code>，占用 1 位（实际实现可能占 1
字节）。</li>
<li>可空时装箱为 <code>java.lang.Boolean</code>。</li>
<li>逻辑运算基于短路求值。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> isActive: <span class="built_in">Boolean</span> = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">val</span> isDone: <span class="built_in">Boolean</span>? = <span class="literal">null</span></span><br><span class="line">    println(<span class="string">&quot;isActive: <span class="variable">$isActive</span>, isDone: <span class="variable">$isDone</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 逻辑运算</span></span><br><span class="line">    <span class="keyword">val</span> result = isActive &amp;&amp; (isDone ?: <span class="literal">false</span>)</span><br><span class="line">    println(<span class="string">&quot;Result: <span class="variable">$result</span>&quot;</span>)  <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 三态逻辑</span></span><br><span class="line">    <span class="keyword">val</span> status = <span class="keyword">when</span> (isDone) &#123;</span><br><span class="line">        <span class="literal">true</span> -&gt; <span class="string">&quot;Completed&quot;</span></span><br><span class="line">        <span class="literal">false</span> -&gt; <span class="string">&quot;Pending&quot;</span></span><br><span class="line">        <span class="literal">null</span> -&gt; <span class="string">&quot;Unknown&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    println(<span class="string">&quot;Status: <span class="variable">$status</span>&quot;</span>)  <span class="comment">// Unknown</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>可空处理</strong>：<code>Boolean?</code> 在逻辑运算中需配合
<code>?:</code> 或 <code>!!</code>，否则编译错误。</li>
<li><strong>短路求值</strong>：<code>&amp;&amp;</code> 和
<code>||</code> 是短路的，避免在右边放入副作用代码。</li>
<li><strong>性能</strong>：避免不必要的装箱（如
<code>Boolean?</code>），影响效率。</li>
</ul></li>
</ul>
<hr />
<h3 id="变量与常量">2. 变量与常量</h3>
<h4 id="变量var">2.1 变量：<code>var</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>使用 <code>var</code> 关键字声明可变变量，可多次赋值。</li>
<li>支持类型推断（如 <code>var x = 10</code> 推断为
<code>Int</code>），或显式声明（如 <code>var x: Int = 10</code>）。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>循环计数器、临时状态存储。</li>
<li>用户输入或动态数据处理。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为 JVM 的普通局部变量或字段，分配内存后可自由修改。</li>
<li>类型推断在编译时完成，生成对应的字节码类型（如
<code>int</code>）。</li>
<li>不涉及运行时开销。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> count = <span class="number">10</span></span><br><span class="line">    println(<span class="string">&quot;Initial: <span class="variable">$count</span>&quot;</span>)  <span class="comment">// 10</span></span><br><span class="line">    count = <span class="number">20</span></span><br><span class="line">    println(<span class="string">&quot;Updated: <span class="variable">$count</span>&quot;</span>)  <span class="comment">// 20</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 类型显式声明</span></span><br><span class="line">    <span class="keyword">var</span> name: String = <span class="string">&quot;Kotlin&quot;</span></span><br><span class="line">    name = <span class="string">&quot;Java&quot;</span></span><br><span class="line">    println(<span class="string">&quot;Name: <span class="variable">$name</span>&quot;</span>)  <span class="comment">// Java</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 作用域示例</span></span><br><span class="line">    run &#123;</span><br><span class="line">        <span class="keyword">var</span> local = <span class="number">5</span></span><br><span class="line">        local += <span class="number">1</span></span><br><span class="line">        println(<span class="string">&quot;Local: <span class="variable">$local</span>&quot;</span>)  <span class="comment">// 6</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>过度使用</strong>：滥用 <code>var</code>
增加可变性，降低代码安全性，建议优先用 <code>val</code>。</li>
<li><strong>类型一致性</strong>：赋值时类型必须匹配，否则编译错误。</li>
<li><strong>作用域</strong>：局部变量未初始化不会报错，但使用前需赋值。</li>
</ul></li>
</ul>
<h4 id="常量val">2.2 常量：<code>val</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>使用 <code>val</code> 关键字声明只读变量，赋值后不可更改引用。</li>
<li>支持类型推断和显式声明。</li>
<li>可用于表达式返回值。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>常量定义（如数学常数 <code>PI</code>）。</li>
<li>函数结果缓存、不可变配置。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为 JVM 的 <code>final</code> 变量，确保引用不可变。</li>
<li>对于对象，<code>val</code>
只限制引用，对象内部状态可通过方法修改。</li>
<li>若为基本类型，编译器可能内联值以优化性能。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> pi = <span class="number">3.14</span></span><br><span class="line">    <span class="comment">// pi = 3.15  // 错误：val 不可重新赋值</span></span><br><span class="line">    println(<span class="string">&quot;Pi: <span class="variable">$pi</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 可变对象</span></span><br><span class="line">    <span class="keyword">val</span> list = mutableListOf(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">    list.add(<span class="number">3</span>)</span><br><span class="line">    println(<span class="string">&quot;List: <span class="variable">$list</span>&quot;</span>)  <span class="comment">// [1, 2, 3]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 表达式赋值</span></span><br><span class="line">    <span class="keyword">val</span> x = <span class="number">5</span></span><br><span class="line">    <span class="keyword">val</span> max = <span class="keyword">if</span> (x &gt; <span class="number">0</span>) x <span class="keyword">else</span> <span class="number">0</span></span><br><span class="line">    println(<span class="string">&quot;Max: <span class="variable">$max</span>&quot;</span>)  <span class="comment">// 5</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>引用 vs 对象</strong>：<code>val</code>
只限制引用，对象内容可变，需区分。</li>
<li><strong>初始化</strong>：必须初始化或在 <code>init</code>
块中赋值，否则编译错误。</li>
<li><strong>性能</strong>：编译器可能内联
<code>val</code>，但复杂表达式不会。</li>
</ul></li>
</ul>
<hr />
<h3 id="运算符">3. 运算符</h3>
<h4 id="算术运算符--">3.1 算术运算符：<code>+</code>, <code>-</code>,
<code>*</code>, <code>/</code>, <code>%</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li><code>+</code>：加法或字符串拼接。</li>
<li><code>-</code>：减法。</li>
<li><code>*</code>：乘法。</li>
<li><code>/</code>：除法（整数除法结果为整数，浮点除法为浮点数）。</li>
<li><code>%</code>：取模。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>数学计算（如统计、物理模拟）。</li>
<li>字符串拼接（如日志生成）。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>映射到 JVM 的数学指令（如 <code>iadd</code>,
<code>fdiv</code>）。</li>
<li>字符串 <code>+</code> 编译为 <code>StringBuilder</code> 操作。</li>
<li>除法对整数和浮点分开处理。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> a = <span class="number">10</span></span><br><span class="line">    <span class="keyword">val</span> b = <span class="number">3</span></span><br><span class="line">    println(<span class="string">&quot;a + b = <span class="subst">$&#123;a + b&#125;</span>&quot;</span>)  <span class="comment">// 13</span></span><br><span class="line">    println(<span class="string">&quot;a - b = <span class="subst">$&#123;a - b&#125;</span>&quot;</span>)  <span class="comment">// 7</span></span><br><span class="line">    println(<span class="string">&quot;a * b = <span class="subst">$&#123;a * b&#125;</span>&quot;</span>)  <span class="comment">// 30</span></span><br><span class="line">    println(<span class="string">&quot;a / b = <span class="subst">$&#123;a / b&#125;</span>&quot;</span>)  <span class="comment">// 3 (整数除法)</span></span><br><span class="line">    println(<span class="string">&quot;a % b = <span class="subst">$&#123;a % b&#125;</span>&quot;</span>)  <span class="comment">// 1</span></span><br><span class="line">    println(<span class="string">&quot;Hello &quot;</span> + <span class="string">&quot;World&quot;</span>)  <span class="comment">// Hello World</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>除以零</strong>：整数除以 0 抛
<code>ArithmeticException</code>，浮点返回 <code>Infinity</code>。</li>
<li><strong>类型提升</strong>：操作数类型不同时提升到更高精度（如
<code>Int + Double</code> 结果为 <code>Double</code>）。</li>
<li><strong>字符串拼接性能</strong>：大量 <code>+</code>
操作效率低，建议用模板或 <code>StringBuilder</code>。</li>
</ul></li>
</ul>
<h4 id="关系运算符">3.2 关系运算符：<code>==</code>, <code>!=</code>,
<code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>,
<code>&gt;=</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li><code>==</code>：值相等。</li>
<li><code>!=</code>：值不等。</li>
<li><code>&lt;</code>, <code>&gt;</code>：小于、大于。</li>
<li><code>&lt;=</code>, <code>&gt;=</code>：小于等于、大于等于。</li>
<li><code>===</code>, <code>!==</code>：引用相等/不等。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>条件判断、排序算法。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li><code>==</code> 调用 <code>equals()</code>，<code>===</code>
检查对象引用。</li>
<li>其他运算符映射到 JVM 比较指令（如 <code>if_icmplt</code>）。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> x = <span class="number">5</span></span><br><span class="line">    <span class="keyword">val</span> y = <span class="number">10</span></span><br><span class="line">    println(<span class="string">&quot;x == y: <span class="subst">$&#123;x == y&#125;</span>&quot;</span>)  <span class="comment">// false</span></span><br><span class="line">    println(<span class="string">&quot;x &lt; y: <span class="subst">$&#123;x &lt; y&#125;</span>&quot;</span>)  <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> str1 = <span class="string">&quot;Kotlin&quot;</span></span><br><span class="line">    <span class="keyword">val</span> str2 = <span class="string">&quot;Kotlin&quot;</span></span><br><span class="line">    println(<span class="string">&quot;str1 === str2: <span class="subst">$&#123;str1 === str2&#125;</span>&quot;</span>)  <span class="comment">// true (字符串池)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>浮点比较</strong>：避免直接用
<code>==</code>，因精度误差可能导致错误。</li>
<li><strong><code>===</code>
使用</strong>：仅适用于对象引用，基本类型始终用 <code>==</code>。</li>
<li><strong>自定义类</strong>：<code>==</code> 需要重写
<code>equals()</code>。</li>
</ul></li>
</ul>
<h4 id="逻辑运算符">3.3 逻辑运算符：<code>&amp;&amp;</code>,
<code>||</code>, <code>!</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li><code>&amp;&amp;</code>：逻辑与，短路求值。</li>
<li><code>||</code>：逻辑或，短路求值。</li>
<li><code>!</code>：逻辑非。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>多条件组合判断。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>短路求值优化性能，映射到 JVM 逻辑指令。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> a = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">val</span> b = <span class="literal">false</span></span><br><span class="line">    println(<span class="string">&quot;a &amp;&amp; b: <span class="subst">$&#123;a &amp;&amp; b&#125;</span>&quot;</span>)  <span class="comment">// false</span></span><br><span class="line">    println(<span class="string">&quot;a || b: <span class="subst">$&#123;a || b&#125;</span>&quot;</span>)  <span class="comment">// true</span></span><br><span class="line">    println(<span class="string">&quot;!a: <span class="subst">$&#123;!a&#125;</span>&quot;</span>)  <span class="comment">// false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>副作用</strong>：短路求值可能跳过右边代码，注意逻辑顺序。</li>
<li><strong>可空类型</strong>：<code>Boolean?</code> 需处理
<code>null</code>。</li>
</ul></li>
</ul>
<h4 id="位运算符and-or-xor-shl-shr">3.4 位运算符：<code>and</code>,
<code>or</code>, <code>xor</code>, <code>shl</code>,
<code>shr</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li><code>and</code>：按位与。</li>
<li><code>or</code>：按位或。</li>
<li><code>xor</code>：按位异或。</li>
<li><code>shl</code>：左移。</li>
<li><code>shr</code>：右移（带符号）。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>权限标志、位掩码、低级优化。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>映射到 JVM 位操作指令（如 <code>iand</code>,
<code>ishl</code>）。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> x = <span class="number">5</span>  <span class="comment">// 101</span></span><br><span class="line">    <span class="keyword">val</span> y = <span class="number">3</span>  <span class="comment">// 011</span></span><br><span class="line">    println(<span class="string">&quot;x and y: <span class="subst">$&#123;x and y&#125;</span>&quot;</span>)  <span class="comment">// 1 (001)</span></span><br><span class="line">    println(<span class="string">&quot;x or y: <span class="subst">$&#123;x or y&#125;</span>&quot;</span>)  <span class="comment">// 7 (111)</span></span><br><span class="line">    println(<span class="string">&quot;x xor y: <span class="subst">$&#123;x xor y&#125;</span>&quot;</span>)  <span class="comment">// 6 (110)</span></span><br><span class="line">    println(<span class="string">&quot;x shl 1: <span class="subst">$&#123;x shl <span class="number">1</span>&#125;</span>&quot;</span>)  <span class="comment">// 10 (1010)</span></span><br><span class="line">    println(<span class="string">&quot;x shr 1: <span class="subst">$&#123;x shr <span class="number">1</span>&#125;</span>&quot;</span>)  <span class="comment">// 2 (010)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>符号位</strong>：<code>shr</code>
是带符号右移，负数需注意。</li>
<li><strong>溢出</strong>：移位不检查范围，可能导致意外结果。</li>
</ul></li>
</ul>
<h4 id="赋值运算符--">3.5 赋值运算符：<code>=</code>, <code>+=</code>,
<code>-=</code>, <code>*=</code>, <code>/=</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li><code>=</code>：简单赋值。</li>
<li><code>+=</code>, <code>-=</code>, <code>*=</code>,
<code>/=</code>：组合赋值。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>累加操作、状态更新。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为赋值和计算的组合指令。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> x = <span class="number">10</span></span><br><span class="line">    x += <span class="number">5</span></span><br><span class="line">    println(<span class="string">&quot;x += 5: <span class="variable">$x</span>&quot;</span>)  <span class="comment">// 15</span></span><br><span class="line">    x *= <span class="number">2</span></span><br><span class="line">    println(<span class="string">&quot;x *= 2: <span class="variable">$x</span>&quot;</span>)  <span class="comment">// 30</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>不可变变量</strong>：<code>val</code>
不支持赋值运算符。</li>
<li><strong>类型匹配</strong>：右边类型需与左边兼容。</li>
</ul></li>
</ul>
<h4 id="其他运算符-.-in">3.6 其他运算符：<code>?:</code>,
<code>?.</code>, <code>!!</code>, <code>in</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li><code>?:</code>（Elvis）：若左边为
<code>null</code>，返回右边值。</li>
<li><code>?.</code>：安全调用，若对象为 <code>null</code> 返回
<code>null</code>。</li>
<li><code>!!</code>：非空断言，若为 <code>null</code> 抛异常。</li>
<li><code>in</code>：检查是否在范围或集合中。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>空安全处理、范围检查。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译器插入 <code>null</code> 检查和跳转逻辑。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> str: String? = <span class="literal">null</span></span><br><span class="line">    println(<span class="string">&quot;Safe call: <span class="subst">$&#123;str?.length&#125;</span>&quot;</span>)  <span class="comment">// null</span></span><br><span class="line">    println(<span class="string">&quot;Elvis: <span class="subst">$&#123;str?.length ?: <span class="number">0</span>&#125;</span>&quot;</span>)  <span class="comment">// 0</span></span><br><span class="line">    println(<span class="string">&quot;In range: <span class="subst">$&#123;<span class="number">3</span> in <span class="number">1.</span><span class="number">.5</span>&#125;</span>&quot;</span>)  <span class="comment">// true</span></span><br><span class="line">    <span class="comment">// println(str!!.length)  // 抛 NPE</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong><code>!!</code> 风险</strong>：滥用可能抛
<code>NullPointerException</code>，尽量避免。</li>
<li><strong>性能</strong>：<code>?.</code> 和 <code>?:</code>
增加分支检查，频繁使用可能影响性能。</li>
<li><strong><code>in</code> 范围</strong>：范围对象需实现
<code>contains</code>。</li>
</ul></li>
</ul>
<hr />
<h3 id="控制结构">4. 控制结构</h3>
<h4 id="条件语句if-else">4.1 条件语句：<code>if</code>,
<code>else</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>基本形式：<code>if (condition) { ... } else { ... }</code>。</li>
<li>可作为表达式，返回值由最后一行决定。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>简单条件分支、返回值计算。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为 JVM 的 <code>if</code> 指令（如
<code>ifne</code>），表达式形式生成临时变量。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> x = <span class="number">5</span></span><br><span class="line">    <span class="keyword">val</span> result = <span class="keyword">if</span> (x &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        println(<span class="string">&quot;Positive&quot;</span>)</span><br><span class="line">        <span class="string">&quot;Positive&quot;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (x == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="string">&quot;Zero&quot;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        println(<span class="string">&quot;Negative&quot;</span>)</span><br><span class="line">        <span class="string">&quot;Negative&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    println(<span class="string">&quot;Result: <span class="variable">$result</span>&quot;</span>)  <span class="comment">// Positive</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>完整性</strong>：作为表达式时必须有
<code>else</code>，否则编译错误。</li>
<li><strong>嵌套</strong>：过多嵌套降低可读性，考虑用
<code>when</code>。</li>
</ul></li>
</ul>
<h4 id="分支语句when">4.2 分支语句：<code>when</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>替代
<code>switch</code>，支持多种条件（如值匹配、范围检查、<code>is</code>
类型检查）。</li>
<li>可作为表达式。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>多条件分支、模式匹配。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为条件跳转或表查找（类似 <code>switch</code>）。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> x = <span class="number">2</span></span><br><span class="line">    <span class="keyword">val</span> desc = <span class="keyword">when</span> (x) &#123;</span><br><span class="line">        <span class="number">1</span> -&gt; <span class="string">&quot;One&quot;</span></span><br><span class="line">        <span class="number">2</span>, <span class="number">3</span> -&gt; <span class="string">&quot;Two or Three&quot;</span></span><br><span class="line">        <span class="keyword">in</span> <span class="number">1.</span><span class="number">.10</span> -&gt; <span class="string">&quot;In range&quot;</span></span><br><span class="line">        <span class="keyword">is</span> <span class="built_in">Int</span> -&gt; <span class="string">&quot;Integer&quot;</span></span><br><span class="line">        <span class="keyword">else</span> -&gt; <span class="string">&quot;Other&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    println(<span class="string">&quot;Description: <span class="variable">$desc</span>&quot;</span>)  <span class="comment">// Two or Three</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>覆盖性</strong>：作为表达式时需覆盖所有情况或加
<code>else</code>。</li>
<li><strong>性能</strong>：复杂条件可能生成较多字节码。</li>
</ul></li>
</ul>
<h4 id="循环for-while-do-while">4.3 循环：<code>for</code>,
<code>while</code>, <code>do-while</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li><code>for</code>：<code>for (item in collection/range) { ... }</code>，支持范围、步长。</li>
<li><code>while</code>：<code>while (condition) { ... }</code>。</li>
<li><code>do-while</code>：<code>do { ... } while (condition)</code>。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>数据遍历、重复执行。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li><code>for</code> 编译为迭代器调用，<code>while</code>
为条件跳转。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1.</span><span class="number">.5</span> step <span class="number">2</span>) print(<span class="string">&quot;<span class="variable">$i</span> &quot;</span>)  <span class="comment">// 1 3 5</span></span><br><span class="line">    println()</span><br><span class="line">    <span class="keyword">var</span> x = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> (x &lt; <span class="number">3</span>) &#123;</span><br><span class="line">        print(<span class="string">&quot;<span class="variable">$x</span> &quot;</span>)</span><br><span class="line">        x++</span><br><span class="line">    &#125;  <span class="comment">// 0 1 2</span></span><br><span class="line">    println()</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        print(<span class="string">&quot;<span class="variable">$x</span> &quot;</span>)</span><br><span class="line">        x--</span><br><span class="line">    &#125; <span class="keyword">while</span> (x &gt; <span class="number">0</span>)  <span class="comment">// 3 2 1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>范围对象</strong>：<code>for</code> 需可迭代对象。</li>
<li><strong>无限循环</strong>：<code>while (true)</code>
需确保退出条件。</li>
</ul></li>
</ul>
<h4 id="跳转break-continue-return">4.4 跳转：<code>break</code>,
<code>continue</code>, <code>return</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li><code>break</code>：退出循环。</li>
<li><code>continue</code>：跳到下一次迭代。</li>
<li><code>return</code>：返回函数结果。</li>
<li>支持标签（如 <code>break@label</code>）。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>控制循环流程。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为 <code>goto</code> 或返回指令。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="symbol">outer@</span> <span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1.</span><span class="number">.3</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (j <span class="keyword">in</span> <span class="number">1.</span><span class="number">.3</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (j == <span class="number">2</span>) <span class="keyword">break</span><span class="symbol">@outer</span></span><br><span class="line">            print(<span class="string">&quot;<span class="variable">$i</span><span class="variable">$j</span> &quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;  <span class="comment">// 11</span></span><br><span class="line">    println()</span><br><span class="line">    <span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1.</span><span class="number">.5</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i == <span class="number">3</span>) <span class="keyword">continue</span></span><br><span class="line">        print(<span class="string">&quot;<span class="variable">$i</span> &quot;</span>)  <span class="comment">// 1 2 4 5</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>标签</strong>：多重循环需正确使用标签，避免跳错。</li>
<li><strong>可读性</strong>：过多跳转降低代码清晰度。</li>
</ul></li>
</ul>
<hr />
<h3 id="函数">5. 函数</h3>
<h4 id="函数定义fun">5.1 函数定义：<code>fun</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>格式：<code>fun name(params): ReturnType { ... }</code>。</li>
<li>返回类型可选（类型推断）。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>代码复用、逻辑封装。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为 JVM 方法，参数和返回值类型静态绑定。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">add</span><span class="params">(a: <span class="type">Int</span>, b: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    println(add(<span class="number">3</span>, <span class="number">4</span>))  <span class="comment">// 7</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>返回类型</strong>：复杂函数建议显式声明返回类型。</li>
<li><strong>命名</strong>：遵循清晰命名规范。</li>
</ul></li>
</ul>
<h4 id="参数默认参数-vararg">5.2 参数：默认参数,
<code>vararg</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>默认参数：<code>param: Type = defaultValue</code>。</li>
<li><code>vararg</code>：可变参数，接收任意数量参数。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>简化函数调用、可变参数处理。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>默认参数生成重载方法。</li>
<li><code>vararg</code> 编译为数组参数。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">printItems</span><span class="params">(<span class="keyword">vararg</span> items: <span class="type">String</span>, prefix: <span class="type">String</span> = <span class="string">&quot;&gt;&quot;</span>)</span></span> &#123;</span><br><span class="line">    items.forEach &#123; println(<span class="string">&quot;<span class="variable">$prefix</span> <span class="variable">$it</span>&quot;</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    printItems(<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, prefix = <span class="string">&quot;#&quot;</span>)  <span class="comment">// # A, # B</span></span><br><span class="line">    printItems(<span class="string">&quot;X&quot;</span>)  <span class="comment">// &gt; X</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>顺序</strong>：默认参数应放在 <code>vararg</code> 后。</li>
<li><strong>唯一性</strong>：一个函数只能有一个
<code>vararg</code>。</li>
</ul></li>
</ul>
<h4 id="单表达式函数">5.3 单表达式函数：<code>=</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>使用 <code>=</code> 替代 <code>{}</code> 和
<code>return</code>，适用于简单函数。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>简洁计算、工具函数。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为普通方法，表达式直接作为返回值。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">multiply</span><span class="params">(a: <span class="type">Int</span>, b: <span class="type">Int</span>)</span></span> = a * b</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    println(multiply(<span class="number">2</span>, <span class="number">3</span>))  <span class="comment">// 6</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>可读性</strong>：复杂逻辑不适合单表达式。</li>
<li><strong>类型推断</strong>：返回值类型需明确。</li>
</ul></li>
</ul>
<h4 id="匿名函数">5.4 匿名函数</h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>格式：<code>fun(params) = expression</code>，无函数名。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>临时逻辑定义、函数变量。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为函数对象。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> anon = <span class="function"><span class="title">fun</span><span class="params">(x: <span class="type">Int</span>)</span></span> = x * <span class="number">2</span></span><br><span class="line">    println(anon(<span class="number">5</span>))  <span class="comment">// 10</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>性能</strong>：频繁创建可能增加开销。</li>
<li><strong>使用范围</strong>：适合局部使用。</li>
</ul></li>
</ul>
<h4 id="高阶函数">5.5 高阶函数</h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>函数参数或返回值为函数类型（如 <code>(Int) -&gt; Int</code>）。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>回调、函数式编程。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为函数接口（如 <code>Function1</code>），若加
<code>inline</code> 则内联。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">apply</span><span class="params">(x: <span class="type">Int</span>, op: (<span class="type">Int</span>) -&gt; <span class="type">Int</span>)</span></span> = op(x)</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    println(apply(<span class="number">5</span>) &#123; it * <span class="number">2</span> &#125;)  <span class="comment">// 10</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>性能</strong>：未加 <code>inline</code>
会生成对象，影响效率。</li>
<li><strong>类型复杂性</strong>：参数类型需清晰定义。</li>
</ul></li>
</ul>
<hr />
<h3 id="类与对象">6. 类与对象</h3>
<h4 id="类定义class">6.1 类定义：<code>class</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>格式：<code>class Name(params) { ... }</code>，主构造函数在类头。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>数据建模、面向对象设计。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为 JVM 类，构造函数生成 <code>init</code> 块。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>(<span class="keyword">val</span> name: String) &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">greet</span><span class="params">()</span></span> = println(<span class="string">&quot;Hello, <span class="variable">$name</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> p = Person(<span class="string">&quot;Alice&quot;</span>)</span><br><span class="line">    p.greet()  <span class="comment">// Hello, Alice</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>主构造函数</strong>：参数需明确作用（<code>val</code>/<code>var</code>）。</li>
</ul></li>
</ul>
<h4 id="构造函数constructor">6.2 构造函数：<code>constructor</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>主构造函数在类头，次构造函数使用 <code>constructor</code>。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>对象初始化多样性。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>次构造函数委托给主构造函数，编译为多个构造方法。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>(<span class="keyword">val</span> name: String) &#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name: String, age: <span class="built_in">Int</span>) : <span class="keyword">this</span>(name) &#123;</span><br><span class="line">        println(<span class="string">&quot;Age: <span class="variable">$age</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    Person(<span class="string">&quot;Alice&quot;</span>, <span class="number">25</span>)  <span class="comment">// Age: 25</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>委托</strong>：次构造函数必须调用主构造函数。</li>
<li><strong>复杂度</strong>：过多构造函数降低可读性。</li>
</ul></li>
</ul>
<h4 id="属性var-val">6.3 属性：<code>var</code>, <code>val</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li><code>var</code> 定义可变属性，<code>val</code> 定义只读属性。</li>
<li>可自定义 <code>get</code>/<code>set</code>。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>对象状态管理。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为字段和访问器方法。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Box</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> size: <span class="built_in">Int</span> = <span class="number">0</span></span><br><span class="line">        <span class="keyword">get</span>() = field</span><br><span class="line">        <span class="keyword">set</span>(value) &#123;</span><br><span class="line">            <span class="keyword">if</span> (value &gt;= <span class="number">0</span>) field = value</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> box = Box()</span><br><span class="line">    box.size = <span class="number">5</span></span><br><span class="line">    println(box.size)  <span class="comment">// 5</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>自定义访问器</strong>：避免无限递归（如
<code>get() = size</code>）。</li>
<li><strong>初始化</strong>：必须初始化或延迟。</li>
</ul></li>
</ul>
<h4 id="访问控制public-private-protected-internal">6.4
访问控制：<code>public</code>, <code>private</code>,
<code>protected</code>, <code>internal</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li><code>public</code>：默认，公开。</li>
<li><code>private</code>：类内可见。</li>
<li><code>protected</code>：类及子类可见。</li>
<li><code>internal</code>：模块内可见。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>封装性控制。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为 JVM 访问修饰符。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Example</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> secret = <span class="number">42</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">val</span> subclassVisible = <span class="string">&quot;Protected&quot;</span></span><br><span class="line">    <span class="keyword">internal</span> <span class="keyword">val</span> moduleVisible = <span class="string">&quot;Internal&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong><code>internal</code></strong>：模块定义需明确。</li>
<li><strong>过度限制</strong>：影响扩展性。</li>
</ul></li>
</ul>
<h4 id="继承open">6.5 继承：<code>open</code>, <code>:</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li><code>open</code> 允许继承，<code>:</code> 表示继承关系。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>类层次设计。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为 JVM 继承结构。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">open</span> <span class="keyword">class</span> <span class="title class_">Animal</span>(<span class="keyword">val</span> name: String)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span>(name: String) : Animal(name)</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong><code>open</code> 必要性</strong>：类默认不可继承。</li>
<li><strong>单一继承</strong>：Kotlin 不支持多重继承。</li>
</ul></li>
</ul>
<h4 id="接口interface">6.6 接口：<code>interface</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>定义方法和属性，使用 <code>override</code> 实现。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>多态、行为契约。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为 JVM 接口。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Flyable</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">fly</span><span class="params">()</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bird</span> : <span class="type">Flyable</span> &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">fly</span><span class="params">()</span></span> = println(<span class="string">&quot;Flying&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>实现冲突</strong>：多接口需处理方法冲突。</li>
<li><strong>默认实现</strong>：避免过度依赖。</li>
</ul></li>
</ul>
<h4 id="抽象类abstract">6.7 抽象类：<code>abstract</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>使用 <code>abstract</code> 定义抽象成员。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>提供部分实现。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为抽象类。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="keyword">abstract</span> <span class="function"><span class="keyword">fun</span> <span class="title">area</span><span class="params">()</span></span>: <span class="built_in">Double</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span>(<span class="keyword">val</span> radius: <span class="built_in">Double</span>) : Shape() &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">area</span><span class="params">()</span></span> = Math.PI * radius * radius</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>抽象成员</strong>：必须被子类实现。</li>
<li><strong>实例化</strong>：不可直接实例化。</li>
</ul></li>
</ul>
<h4 id="数据类data">6.8 数据类：<code>data</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>使用 <code>data</code> 自动生成 <code>toString()</code>,
<code>equals()</code>, <code>copy()</code> 等。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>DTO、简单数据容器。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译器生成额外方法。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">data</span> <span class="keyword">class</span> <span class="title class_">User</span>(<span class="keyword">val</span> id: <span class="built_in">Int</span>, <span class="keyword">val</span> name: String)</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> user = User(<span class="number">1</span>, <span class="string">&quot;Alice&quot;</span>)</span><br><span class="line">    println(user.copy(name = <span class="string">&quot;Bob&quot;</span>))  <span class="comment">// User(id=1, name=Bob)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>主构造函数</strong>：至少一个参数。</li>
<li><strong>继承限制</strong>：不可被 <code>open</code>。</li>
</ul></li>
</ul>
<h4 id="对象声明object">6.9 对象声明：<code>object</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>使用 <code>object</code> 创建单例。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>单例模式、工具类。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为静态实例。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">object</span> Singleton &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">hello</span><span class="params">()</span></span> = println(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    Singleton.hello()  <span class="comment">// Hello</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>状态管理</strong>：单例需注意线程安全。</li>
<li><strong>滥用</strong>：不适合频繁创建的对象。</li>
</ul></li>
</ul>
<h4 id="伴生对象companion-object">6.10
伴生对象：<code>companion object</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>在类中使用 <code>companion object</code> 定义静态成员。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>工厂方法、静态工具。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为类的静态字段。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">    <span class="keyword">companion</span> <span class="keyword">object</span> &#123;</span><br><span class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">create</span><span class="params">()</span></span> = MyClass()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> instance = MyClass.create()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>命名</strong>：可命名以提高可读性。</li>
<li><strong>访问</strong>：外部需通过类名访问。</li>
</ul></li>
</ul>
<hr />
<h3 id="包与导入">7. 包与导入</h3>
<h4 id="包定义package">7.1 包定义：<code>package</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>使用 <code>package</code> 定义命名空间。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>代码组织、避免命名冲突。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为 JVM 包结构。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">hello</span><span class="params">()</span></span> = println(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    hello()  <span class="comment">// Hello</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>一致性</strong>：包名应与目录结构一致。</li>
<li><strong>冲突</strong>：避免与其他包名冲突。</li>
</ul></li>
</ul>
<h4 id="导入import">7.2 导入：<code>import</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>使用 <code>import</code>
引入类或函数，支持别名（<code>as</code>）。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>使用外部库、简化代码。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译时解析导入路径。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> kotlin.math.PI <span class="keyword">as</span> MathPI</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    println(MathPI)  <span class="comment">// 3.141592653589793</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>命名冲突</strong>：使用 <code>as</code> 解决。</li>
<li><strong>冗余导入</strong>：IDE 可优化。</li>
</ul></li>
</ul>
<hr />
<h3 id="异常处理">8. 异常处理</h3>
<h4 id="try-catch-finally">8.1 <code>try</code>, <code>catch</code>,
<code>finally</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li><code>try</code> 定义可能抛异常的代码，<code>catch</code>
处理异常，<code>finally</code> 确保执行。</li>
<li>可作为表达式。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>错误处理、资源清理。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为 JVM 的异常表。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> result = <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">val</span> x = <span class="number">1</span> / <span class="number">0</span></span><br><span class="line">        <span class="string">&quot;Success&quot;</span></span><br><span class="line">    &#125; <span class="keyword">catch</span> (e: ArithmeticException) &#123;</span><br><span class="line">        println(<span class="string">&quot;Error: <span class="subst">$&#123;e.message&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="string">&quot;Failed&quot;</span></span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        println(<span class="string">&quot;Cleanup&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    println(<span class="string">&quot;Result: <span class="variable">$result</span>&quot;</span>)  <span class="comment">// Failed</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>异常类型</strong>：捕获具体异常，避免用
<code>Exception</code>。</li>
<li><strong><code>finally</code>
执行</strong>：总是执行，注意资源释放。</li>
</ul></li>
</ul>
<h4 id="throw">8.2 <code>throw</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>使用 <code>throw</code> 抛出异常对象。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>自定义错误条件。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>映射到 JVM 的 <code>athrow</code> 指令。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">validate</span><span class="params">(x: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">0</span>) <span class="keyword">throw</span> IllegalArgumentException(<span class="string">&quot;Negative not allowed&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        validate(-<span class="number">1</span>)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e: IllegalArgumentException) &#123;</span><br><span class="line">        println(e.message)  <span class="comment">// Negative not allowed</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>异常信息</strong>：提供清晰描述。</li>
<li><strong>滥用</strong>：不应用作流程控制。</li>
</ul></li>
</ul>
<hr />
<h3 id="泛型">9. 泛型</h3>
<h4 id="泛型类t">9.1 泛型类：<code>&lt;T&gt;</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>使用 <code>&lt;T&gt;</code> 定义类型参数。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>类型安全的容器。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为 JVM 的泛型擦除，使用 <code>Object</code>
并插入类型检查。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Box</span>&lt;<span class="type">T</span>&gt;(<span class="keyword">val</span> value: T)</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> intBox = Box(<span class="number">42</span>)</span><br><span class="line">    <span class="keyword">val</span> strBox = Box(<span class="string">&quot;Kotlin&quot;</span>)</span><br><span class="line">    println(<span class="string">&quot;<span class="subst">$&#123;intBox.value&#125;</span>, <span class="subst">$&#123;strBox.value&#125;</span>&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>类型约束</strong>：可用 <code>where</code> 限制。</li>
<li><strong>运行时</strong>：无法直接获取 <code>T</code> 类型。</li>
</ul></li>
</ul>
<h4 id="泛型函数">9.2 泛型函数</h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>在函数名前加 <code>&lt;T&gt;</code>。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>通用算法。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>同泛型类，类型擦除。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="type">&lt;T&gt;</span> <span class="title">printItem</span><span class="params">(item: <span class="type">T</span>)</span></span> = println(item)</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    printItem(<span class="number">42</span>)  <span class="comment">// 42</span></span><br><span class="line">    printItem(<span class="string">&quot;Kotlin&quot;</span>)  <span class="comment">// Kotlin</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>类型推断</strong>：复杂场景需显式指定类型。</li>
<li><strong>性能</strong>：避免过度泛化。</li>
</ul></li>
</ul>
<h4 id="协变out">9.3 协变：<code>out</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>使用 <code>out</code> 限制类型只能作为返回值。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>生产者模式。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译器确保类型安全。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Producer</span>&lt;<span class="type">out T</span>&gt; &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">produce</span><span class="params">()</span></span>: T</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">StringProducer</span> : <span class="type">Producer</span>&lt;<span class="type">String</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">produce</span><span class="params">()</span></span> = <span class="string">&quot;Hello&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> producer: Producer&lt;Any&gt; = StringProducer()</span><br><span class="line">    println(producer.produce())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>限制</strong>：不能用作输入参数。</li>
<li><strong>理解</strong>：需掌握协变概念。</li>
</ul></li>
</ul>
<h4 id="逆变in">9.4 逆变：<code>in</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>使用 <code>in</code> 限制类型只能作为参数。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>消费者模式。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译器检查逆变规则。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Consumer</span>&lt;<span class="type">in T</span>&gt; &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">consume</span><span class="params">(item: <span class="type">T</span>)</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AnyConsumer</span> : <span class="type">Consumer</span>&lt;<span class="type">Any</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">consume</span><span class="params">(item: <span class="type">Any</span>)</span></span> = println(item)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> consumer: Consumer&lt;String&gt; = AnyConsumer()</span><br><span class="line">    consumer.consume(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>限制</strong>：不能用作返回值。</li>
<li><strong>复杂性</strong>：与协变配合需小心。</li>
</ul></li>
</ul>
<h4 id="通配符">9.5 通配符：<code>*</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>表示未知类型，类似 Java 的 <code>?</code>。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>类型无关操作。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为泛型上限 <code>Any?</code>。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">printList</span><span class="params">(list: <span class="type">List</span>&lt;*&gt;)</span></span> = println(list)</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    printList(listOf(<span class="number">1</span>, <span class="string">&quot;A&quot;</span>))  <span class="comment">// [1, A]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>限制</strong>：无法访问具体类型方法。</li>
<li><strong>替代</strong>：可用具体类型替换。</li>
</ul></li>
</ul>
<hr />
<h3 id="空安全">10. 空安全</h3>
<h4 id="可空类型">10.1 可空类型：<code>?</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>在类型后加 <code>?</code> 表示可为 <code>null</code>。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>处理潜在的 <code>null</code> 值。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译器强制类型检查。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> str: String? = <span class="literal">null</span></span><br><span class="line">    println(str)  <span class="comment">// null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>过度使用</strong>：过多 <code>?</code> 增加空检查负担。</li>
<li><strong>初始化</strong>：尽量推迟到确定非空。</li>
</ul></li>
</ul>
<h4 id="安全调用.">10.2 安全调用：<code>?.</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>若对象为 <code>null</code>，返回
<code>null</code>，否则调用方法。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>避免空指针异常。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为条件跳转。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> str: String? = <span class="literal">null</span></span><br><span class="line">    println(str?.length)  <span class="comment">// null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>链式调用</strong>：多级 <code>?.</code>
返回类型可能是嵌套可空。</li>
<li><strong>性能</strong>：频繁使用增加分支。</li>
</ul></li>
</ul>
<h4 id="elvis-操作符">10.3 Elvis 操作符：<code>?:</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>若左边为 <code>null</code>，返回右边值。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>提供默认值。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为条件表达式。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> str: String? = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">val</span> length = str?.length ?: -<span class="number">1</span></span><br><span class="line">    println(length)  <span class="comment">// -1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>类型一致</strong>：左右类型需匹配。</li>
<li><strong>副作用</strong>：右边避免复杂逻辑。</li>
</ul></li>
</ul>
<h4 id="非空断言">10.4 非空断言：<code>!!</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>强制解包，若为 <code>null</code> 抛异常。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>确信非空时使用。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为直接访问，若 <code>null</code> 抛
<code>NullPointerException</code>。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> str: String? = <span class="string">&quot;Kotlin&quot;</span></span><br><span class="line">    println(str!!.length)  <span class="comment">// 6</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>风险</strong>：滥用导致运行时异常。</li>
<li><strong>替代</strong>：优先用 <code>?.</code> 或
<code>?:</code>。</li>
</ul></li>
</ul>
<hr />
<h3 id="注解">11. 注解</h3>
<h4 id="内置注解">11.1 内置注解</h4>
<p>Kotlin 提供了一系列内置注解，主要用于控制编译器行为、与 JVM
平台交互或增强代码语义。以下是所有内置注解的完整列表，涵盖标准库中定义的注解（基于
Kotlin 1.9 及之前版本）：</p>
<hr />
<h5 id="deprecated"><code>@Deprecated</code></h5>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>标记代码元素（类、函数、属性等）为废弃状态。</li>
<li>参数：<code>message: String</code>（必填，废弃原因），<code>replaceWith: ReplaceWith</code>（可选，替代方案），<code>level: DeprecationLevel</code>（可选，废弃级别：<code>WARNING</code>
或 <code>ERROR</code>，默认 <code>WARNING</code>）。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>API 维护：提示用户停止使用旧 API。</li>
<li>代码迁移：引导开发者转向新实现。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译器在编译时发出警告或错误（取决于
<code>level</code>），并在生成的 JVM 字节码中添加
<code>@java.lang.Deprecated</code>。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Deprecated(<span class="string">&quot;Use newFunc instead&quot;</span>, ReplaceWith(<span class="string">&quot;newFunc()&quot;</span>), DeprecationLevel.WARNING)</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">oldFunc</span><span class="params">()</span></span> = println(<span class="string">&quot;Old&quot;</span>)</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">newFunc</span><span class="params">()</span></span> = println(<span class="string">&quot;New&quot;</span>)</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    oldFunc()  <span class="comment">// 编译器警告：&#x27;oldFunc&#x27; is deprecated</span></span><br><span class="line">    newFunc()  <span class="comment">// New</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>信息</strong>：<code>message</code>
应清晰说明废弃原因。</li>
<li><strong>替代方案</strong>：<code>ReplaceWith</code>
提供可直接替换的代码，提升迁移效率。</li>
<li><strong>级别</strong>：使用 <code>ERROR</code>
时调用处会编译失败，谨慎使用。</li>
</ul></li>
</ul>
<hr />
<h5 id="suppress"><code>@Suppress</code></h5>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>抑制特定的编译器警告或错误。</li>
<li>参数：可变字符串数组（如
<code>"DEPRECATION"</code>），指定要抑制的警告类型。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>临时忽略无关警告（如使用废弃 API）。</li>
<li>清理代码时避免过多告警干扰。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译器在分析代码时跳过指定警告的检查，不影响生成的字节码。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Deprecated(<span class="string">&quot;Use newFunc instead&quot;</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">oldFunc</span><span class="params">()</span></span> = println(<span class="string">&quot;Old&quot;</span>)</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">newFunc</span><span class="params">()</span></span> = println(<span class="string">&quot;New&quot;</span>)</span><br><span class="line"><span class="meta">@Suppress(<span class="string">&quot;DEPRECATION&quot;</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    oldFunc()  <span class="comment">// 无警告</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>范围</strong>：尽量具体到最小作用域，避免隐藏重要问题。</li>
<li><strong>警告类型</strong>：需查阅文档确认有效的警告名称（如
<code>"UNUSED_VARIABLE"</code>）。</li>
</ul></li>
</ul>
<hr />
<h5 id="jvmoverloads"><code>@JvmOverloads</code></h5>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>为带有默认参数的函数或构造函数生成 JVM 重载方法。</li>
<li>无参数，直接标注在函数或构造函数上。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>与 Java 互操作：使 Kotlin 默认参数对 Java 调用者可见。</li>
<li>简化 API：提供多种调用方式。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译器为每个默认参数生成重载方法，JVM 字节码中表现为独立方法。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@JvmOverloads</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">greet</span><span class="params">(name: <span class="type">String</span> = <span class="string">&quot;Guest&quot;</span>, greeting: <span class="type">String</span> = <span class="string">&quot;Hello&quot;</span>)</span></span> = <span class="string">&quot;<span class="variable">$greeting</span>, <span class="variable">$name</span>!&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    println(greet())           <span class="comment">// Hello, Guest!</span></span><br><span class="line">    println(greet(<span class="string">&quot;Alice&quot;</span>))    <span class="comment">// Hello, Alice!</span></span><br><span class="line">    println(greet(<span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;Hi&quot;</span>)) <span class="comment">// Hi, Bob!</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>参数顺序</strong>：默认参数需连续靠后，否则生成不完整。</li>
<li><strong>性能</strong>：参数过多时增加字节码大小。</li>
<li><strong>平台限制</strong>：仅对 JVM 有效。</li>
</ul></li>
</ul>
<hr />
<h5 id="jvmstatic"><code>@JvmStatic</code></h5>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>将伴生对象中的函数或属性标记为静态，生成 JVM 静态方法或字段。</li>
<li>应用于伴生对象成员。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>与 Java 互操作：使伴生对象成员可通过类名直接调用。</li>
<li>工具类设计：模拟 Java 静态方法。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译器在类中生成静态方法，绕过伴生对象实例，直接映射到 JVM
静态调用。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Utils</span> &#123;</span><br><span class="line">    <span class="keyword">companion</span> <span class="keyword">object</span> &#123;</span><br><span class="line">        <span class="meta">@JvmStatic</span></span><br><span class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">sayHello</span><span class="params">()</span></span> = println(<span class="string">&quot;Hello from static&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    Utils.sayHello()  <span class="comment">// Kotlin 调用</span></span><br><span class="line">    <span class="comment">// Java: Utils.sayHello();</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>适用范围</strong>：仅限伴生对象。</li>
<li><strong>冗余</strong>：非 Java 交互时无需使用。</li>
</ul></li>
</ul>
<hr />
<h5 id="jvmfield"><code>@JvmField</code></h5>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>将属性暴露为 JVM 的公共字段，跳过 getter/setter。</li>
<li>应用于属性声明。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>与 Java 互操作：直接访问字段而非通过方法。</li>
<li>性能优化：避免访问器开销。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译器生成 public 字段而非封装属性，移除 Kotlin 的属性封装。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Data</span> &#123;</span><br><span class="line">    <span class="meta">@JvmField</span></span><br><span class="line">    <span class="keyword">val</span> id = <span class="number">42</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> d = Data()</span><br><span class="line">    println(d.id)  <span class="comment">// 42</span></span><br><span class="line">    <span class="comment">// Java: int value = new Data().id;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>封装性</strong>：丧失 getter/setter 控制。</li>
<li><strong>限制</strong>：不能与 <code>private</code>
或自定义访问器共用。</li>
</ul></li>
</ul>
<hr />
<h5 id="throws"><code>@Throws</code></h5>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>指定函数可能抛出的异常，生成 JVM 的 <code>throws</code> 声明。</li>
<li>参数：异常类的 <code>KClass</code> 列表（如
<code>@Throws(IOException::class)</code>）。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>与 Java 互操作：告知 Java 调用者异常类型。</li>
<li>文档化：明确异常行为。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译器在字节码中添加 <code>throws</code> 子句，与 Java
的异常声明一致。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException</span><br><span class="line"><span class="meta">@Throws(IOException::class)</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">riskyOperation</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> IOException(<span class="string">&quot;Something went wrong&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        riskyOperation()</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e: IOException) &#123;</span><br><span class="line">        println(e.message)  <span class="comment">// Something went wrong</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>必要性</strong>：Kotlin 不强制异常声明，仅为 Java
兼容。</li>
<li><strong>类型</strong>：需使用 <code>::class</code> 指定。</li>
</ul></li>
</ul>
<hr />
<h5 id="jvmname"><code>@JvmName</code></h5>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>指定函数或属性在 JVM 中的名称，避免命名冲突。</li>
<li>参数：字符串，表示 JVM 名称。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>解决签名冲突：如与 Java 方法名冲突。</li>
<li>美化 API：自定义 Java 可见名称。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译器修改生成的 JVM 方法或字段名称。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@JvmName(<span class="string">&quot;customGreet&quot;</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">greet</span><span class="params">()</span></span> = println(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    greet()  <span class="comment">// Hello</span></span><br><span class="line">    <span class="comment">// Java: MyClass.customGreet();</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>唯一性</strong>：新名称需避免冲突。</li>
<li><strong>范围</strong>：仅影响 JVM 签名。</li>
</ul></li>
</ul>
<hr />
<h5 id="jvmmultifileclass"><code>@JvmMultifileClass</code></h5>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>将多个文件中的顶层函数合并为单个 JVM 类。</li>
<li>与 <code>@file:JvmName</code> 配合使用。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>模块化开发：将分散的顶层函数整合为一个类。</li>
<li>Java 互操作：统一访问入口。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译器将多个文件中的函数合并到一个类文件中。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// File1.kt</span></span><br><span class="line"><span class="meta">@file:JvmName</span>(<span class="string">&quot;Utils&quot;</span>)</span><br><span class="line"><span class="meta">@file:JvmMultifileClass</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">util1</span><span class="params">()</span></span> = println(<span class="string">&quot;Util 1&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// File2.kt</span></span><br><span class="line"><span class="meta">@file:JvmName</span>(<span class="string">&quot;Utils&quot;</span>)</span><br><span class="line"><span class="meta">@file:JvmMultifileClass</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">util2</span><span class="params">()</span></span> = println(<span class="string">&quot;Util 2&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    util1()  <span class="comment">// Util 1</span></span><br><span class="line">    util2()  <span class="comment">// Util 2</span></span><br><span class="line">    <span class="comment">// Java: Utils.util1(); Utils.util2();</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>配合使用</strong>：必须与 <code>@file:JvmName</code>
一起使用。</li>
<li><strong>一致性</strong>：所有文件需相同 <code>JvmName</code>。</li>
</ul></li>
</ul>
<hr />
<h5 id="synchronized"><code>@Synchronized</code></h5>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>标记函数为同步，类似 Java 的 <code>synchronized</code> 方法。</li>
<li>应用于函数。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>多线程编程：确保线程安全。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译器生成 JVM 的 <code>synchronized</code>
块，锁定函数所属对象。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Counter</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> count = <span class="number">0</span></span><br><span class="line">    <span class="meta">@Synchronized</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">increment</span><span class="params">()</span></span> &#123;</span><br><span class="line">        count++</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> counter = Counter()</span><br><span class="line">    counter.increment()</span><br><span class="line">    println(counter.count)  <span class="comment">// 1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>性能</strong>：同步降低并发性，谨慎使用。</li>
<li><strong>范围</strong>：仅锁定当前实例。</li>
</ul></li>
</ul>
<hr />
<h5 id="volatile"><code>@Volatile</code></h5>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>标记属性为 volatile，确保线程间可见性。</li>
<li>应用于属性。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>多线程编程：避免线程缓存问题。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>映射到 JVM 的 <code>volatile</code> 修饰符，保证内存一致性。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ThreadSafe</span> &#123;</span><br><span class="line">    <span class="meta">@Volatile</span></span><br><span class="line">    <span class="keyword">var</span> flag = <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> ts = ThreadSafe()</span><br><span class="line">    ts.flag = <span class="literal">true</span></span><br><span class="line">    println(ts.flag)  <span class="comment">// true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>限制</strong>：仅适用于
<code>var</code>，不可用于局部变量。</li>
<li><strong>开销</strong>：增加内存屏障，影响性能。</li>
</ul></li>
</ul>
<hr />
<h5 id="strictfp"><code>@Strictfp</code></h5>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>标记函数或类使用严格浮点运算，遵循 IEEE 754 标准。</li>
<li>应用于函数或类。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>高精度浮点计算：确保跨平台一致性。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译器生成 JVM 的 <code>strictfp</code> 修饰符，禁用浮点优化。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Strictfp</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">compute</span><span class="params">(x: <span class="type">Double</span>)</span></span>: <span class="built_in">Double</span> = x * <span class="number">2.0</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    println(compute(<span class="number">3.14</span>))  <span class="comment">// 6.28</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>使用场景</strong>：极少使用，除非明确要求一致性。</li>
<li><strong>兼容性</strong>：仅 JVM 有效。</li>
</ul></li>
</ul>
<hr />
<h5 id="publishedapi"><code>@PublishedApi</code></h5>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>标记 <code>internal</code> 函数或属性为公开
API，可被内联函数间接访问。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>库开发：在模块内隐藏实现细节，同时允许内联函数使用。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译器将 <code>internal</code> 元素提升为
<code>public</code>，但仍限制模块外直接访问。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PublishedApi</span></span><br><span class="line"><span class="keyword">internal</span> <span class="function"><span class="keyword">fun</span> <span class="title">internalFunc</span><span class="params">()</span></span> = <span class="string">&quot;Internal&quot;</span></span><br><span class="line"><span class="keyword">inline</span> <span class="function"><span class="keyword">fun</span> <span class="title">publicFunc</span><span class="params">()</span></span> = internalFunc()</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    println(publicFunc())  <span class="comment">// Internal</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>限制</strong>：仅与 <code>inline</code> 配合。</li>
<li><strong>封装性</strong>：谨慎使用，避免泄露实现。</li>
</ul></li>
</ul>
<hr />
<h5 id="sincekotlin"><code>@SinceKotlin</code></h5>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>标记代码元素自某个 Kotlin 版本起可用。</li>
<li>参数：版本号字符串（如 <code>"1.3"</code>）。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>API 文档化：提示最低支持版本。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>仅用于元数据记录，不影响编译或运行。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SinceKotlin(<span class="string">&quot;1.3&quot;</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">modernFeature</span><span class="params">()</span></span> = println(<span class="string">&quot;Available since 1.3&quot;</span>)</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    modernFeature()  <span class="comment">// Available since 1.3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>版本检查</strong>：仅提示，不强制执行。</li>
<li><strong>文档</strong>：建议与版本控制结合。</li>
</ul></li>
</ul>
<hr />
<h5 id="optin"><code>@OptIn</code></h5>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>声明使用实验性或不稳定的 API。</li>
<li>参数：注解类的 <code>KClass</code>（如
<code>@OptIn(ExperimentalTime::class)</code>）。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>使用实验性特性：如协程、时间 API。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译器检查是否标记，未标记时发出警告或错误。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> kotlin.time.ExperimentalTime</span><br><span class="line"><span class="keyword">import</span> kotlin.time.measureTime</span><br><span class="line"><span class="meta">@OptIn(ExperimentalTime::class)</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">measure</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> duration = measureTime &#123; Thread.sleep(<span class="number">100</span>) &#125;</span><br><span class="line">    println(duration)  <span class="comment">// ~100ms</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    measure()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>风险</strong>：实验性 API 可能变更。</li>
<li><strong>范围</strong>：可用于文件或模块级别。</li>
</ul></li>
</ul>
<hr />
<h5 id="filejvmname"><code>@file:JvmName</code></h5>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>指定文件编译后在 JVM 中的类名。</li>
<li>参数：字符串，表示类名。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>顶层函数命名：避免默认的 <code>FileKt</code> 类名。</li>
<li>与 <code>@JvmMultifileClass</code> 配合。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译器修改生成类的名称。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@file:JvmName</span>(<span class="string">&quot;MyUtils&quot;</span>)</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">util</span><span class="params">()</span></span> = println(<span class="string">&quot;Utility&quot;</span>)</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    util()  <span class="comment">// Utility</span></span><br><span class="line">    <span class="comment">// Java: MyUtils.util();</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>冲突</strong>：确保名称唯一。</li>
<li><strong>范围</strong>：仅文件级有效。</li>
</ul></li>
</ul>
<hr />
<h5 id="filesuppress"><code>@file:Suppress</code></h5>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>在文件级别抑制警告。</li>
<li>参数：警告类型字符串数组。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>文件级警告清理。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>同 <code>@Suppress</code>，作用于整个文件。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@file:Suppress</span>(<span class="string">&quot;UNUSED_VARIABLE&quot;</span>)</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> unused = <span class="number">42</span>  <span class="comment">// 无警告</span></span><br><span class="line">    println(<span class="string">&quot;Done&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>范围</strong>：影响整个文件，谨慎使用。</li>
<li><strong>替代</strong>：局部 <code>@Suppress</code> 更精准。</li>
</ul></li>
</ul>
<hr />
<h5 id="完整示例整合">完整示例整合</h5>
<p>以下是一个综合示例，展示部分内置注解的协同使用： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@file:JvmName</span>(<span class="string">&quot;Demo&quot;</span>)</span><br><span class="line"><span class="meta">@Deprecated(<span class="string">&quot;Use newApi instead&quot;</span>, ReplaceWith(<span class="string">&quot;newApi()&quot;</span>))</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">oldApi</span><span class="params">()</span></span> = println(<span class="string">&quot;Old API&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@JvmOverloads</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">newApi</span><span class="params">(message: <span class="type">String</span> = <span class="string">&quot;New&quot;</span>, count: <span class="type">Int</span> = <span class="number">1</span>)</span></span> = println(<span class="string">&quot;<span class="variable">$message</span> repeated <span class="variable">$count</span> times&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Example</span> &#123;</span><br><span class="line">    <span class="keyword">companion</span> <span class="keyword">object</span> &#123;</span><br><span class="line">        <span class="meta">@JvmStatic</span></span><br><span class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">staticMethod</span><span class="params">()</span></span> = println(<span class="string">&quot;Static&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Volatile</span></span><br><span class="line">    <span class="keyword">var</span> flag = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Synchronized</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">syncMethod</span><span class="params">()</span></span> &#123;</span><br><span class="line">        flag = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@OptIn(ExperimentalTime::class)</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">measureTime</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> duration = kotlin.time.measureTime &#123; Thread.sleep(<span class="number">100</span>) &#125;</span><br><span class="line">    println(<span class="string">&quot;Took <span class="variable">$duration</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Suppress(<span class="string">&quot;DEPRECATION&quot;</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    oldApi()          <span class="comment">// Old API (警告被抑制)</span></span><br><span class="line">    newApi()          <span class="comment">// New repeated 1 times</span></span><br><span class="line">    newApi(<span class="string">&quot;Hi&quot;</span>)      <span class="comment">// Hi repeated 1 times</span></span><br><span class="line">    Example.staticMethod()  <span class="comment">// Static</span></span><br><span class="line">    measureTime()     <span class="comment">// Took ~100ms</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="自定义注解annotation">11.2
自定义注解：<code>annotation</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>使用 <code>annotation class</code> 定义。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>元编程、框架开发。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为 JVM 注解。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">annotation</span> <span class="keyword">class</span> <span class="title class_">MyAnnotation</span>(<span class="keyword">val</span> priority: <span class="built_in">Int</span>)</span><br><span class="line"><span class="meta">@MyAnnotation(1)</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">annotated</span><span class="params">()</span></span> = println(<span class="string">&quot;Annotated&quot;</span>)</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    annotated()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>运行时</strong>：需加 <code>@Retention</code>
指定保留级别。</li>
<li><strong>参数</strong>：仅支持基本类型和枚举。</li>
</ul></li>
</ul>
<hr />
<h2 id="二现代-kotlin-新特性">二、现代 Kotlin 新特性</h2>
<h3 id="kotlin-1.0">1. Kotlin 1.0+</h3>
<h4 id="lambda-表达式-x---x-2">1.1 Lambda
表达式：<code>{ x -&gt; x * 2 }</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>格式：<code>{ params -&gt; expression }</code>，简化为
<code>{ it }</code>（单参数）。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>集合操作、事件处理。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为匿名类或内联代码（若加 <code>inline</code>）。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> list = listOf(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">    <span class="keyword">val</span> doubled = list.map &#123; x -&gt; x * <span class="number">2</span> &#125;</span><br><span class="line">    println(doubled)  <span class="comment">// [2, 4, 6]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>性能</strong>：未内联时生成对象。</li>
<li><strong>可读性</strong>：复杂逻辑不适合。</li>
</ul></li>
</ul>
<h4 id="扩展函数">1.2 扩展函数</h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>在类外定义方法，格式：<code>fun ReceiverType.name() { ... }</code>。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>扩展标准库、工具函数。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为静态方法，接收者作为参数。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> String.<span class="title">addExclamation</span><span class="params">()</span></span> = <span class="string">&quot;<span class="variable">$this</span>!&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    println(<span class="string">&quot;Hello&quot;</span>.addExclamation())  <span class="comment">// Hello!</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>冲突</strong>：与类方法冲突时优先类内方法。</li>
<li><strong>访问</strong>：不能访问私有成员。</li>
</ul></li>
</ul>
<h4 id="中缀函数infix">1.3 中缀函数：<code>infix</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>使用 <code>infix</code> 修饰，允许中缀调用。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>提高代码可读性。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为普通方法调用。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">infix</span> <span class="function"><span class="keyword">fun</span> <span class="built_in">Int</span>.<span class="title">plus</span><span class="params">(x: <span class="type">Int</span>)</span></span> = <span class="keyword">this</span> + x</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    println(<span class="number">5</span> plus <span class="number">3</span>)  <span class="comment">// 8</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>限制</strong>：需单一参数。</li>
<li><strong>滥用</strong>：影响代码一致性。</li>
</ul></li>
</ul>
<h4 id="运算符重载operator">1.4 运算符重载：<code>operator</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>使用 <code>operator</code> 定义运算符行为。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>自定义数学对象。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为方法调用。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">data</span> <span class="keyword">class</span> <span class="title class_">Point</span>(<span class="keyword">val</span> x: <span class="built_in">Int</span>, <span class="keyword">val</span> y: <span class="built_in">Int</span>) &#123;</span><br><span class="line">    <span class="keyword">operator</span> <span class="function"><span class="keyword">fun</span> <span class="title">plus</span><span class="params">(other: <span class="type">Point</span>)</span></span> = Point(x + other.x, y + other.y)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> p1 = Point(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">val</span> p2 = Point(<span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">    println(p1 + p2)  <span class="comment">// Point(x=4, y=6)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>语义</strong>：保持运算符直观含义。</li>
<li><strong>一致性</strong>：与标准库一致。</li>
</ul></li>
</ul>
<hr />
<h3 id="kotlin-1.1">2. Kotlin 1.1</h3>
<h4 id="协程suspend-launch">2.1 协程：<code>suspend</code>,
<code>launch</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li><code>suspend</code>：标记挂起函数。</li>
<li><code>launch</code>：启动协程。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>异步编程、网络请求。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>基于状态机和续体（continuation），编译器生成回调逻辑。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> kotlinx.coroutines.*</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> = runBlocking &#123;</span><br><span class="line">    launch &#123;</span><br><span class="line">        delay(<span class="number">1000L</span>)</span><br><span class="line">        println(<span class="string">&quot;World&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    println(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>依赖</strong>：需引入 <code>kotlinx-coroutines</code>。</li>
<li><strong>作用域</strong>：需在协程作用域内调用。</li>
</ul></li>
</ul>
<hr />
<h3 id="kotlin-1.3">3. Kotlin 1.3</h3>
<h4 id="内联类inline-class">3.1 内联类：<code>inline class</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>使用 <code>inline class</code> 定义单值包装类。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>类型安全、性能优化。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译时展开为原始类型。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">inline</span> <span class="keyword">class</span> <span class="title class_">Name</span>(<span class="keyword">val</span> value: String)</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> name = Name(<span class="string">&quot;Kotlin&quot;</span>)</span><br><span class="line">    println(name.value)  <span class="comment">// Kotlin</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>限制</strong>：仅限单一属性。</li>
<li><strong>兼容性</strong>：早期版本不支持。</li>
</ul></li>
</ul>
<h4 id="无符号整数uint-ulong">3.2 无符号整数：<code>UInt</code>,
<code>ULong</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li><code>UInt</code>：32 位无符号整数，<code>ULong</code>：64 位，加
<code>u</code> 或 <code>U</code> 后缀。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>正整数计算。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为有符号整数，运行时模拟无符号行为。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> uint: UInt = 42u</span><br><span class="line">    <span class="keyword">val</span> ulong: ULong = 123UL</span><br><span class="line">    println(<span class="string">&quot;<span class="variable">$uint</span>, <span class="variable">$ulong</span>&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>运算</strong>：需注意类型匹配。</li>
<li><strong>范围</strong>：超出需转换。</li>
</ul></li>
</ul>
<hr />
<h3 id="kotlin-1.4">4. Kotlin 1.4</h3>
<h4 id="sam-转换改进">4.1 SAM 转换改进</h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>单方法接口支持 Lambda 转换。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>简化 Java 接口调用。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为接口实现。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="keyword">interface</span> Action &#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> action = Action &#123; println(<span class="string">&quot;Run&quot;</span>) &#125;</span><br><span class="line">    action.run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>单一方法</strong>：仅限单抽象方法。</li>
<li><strong>明确性</strong>：避免歧义。</li>
</ul></li>
</ul>
<h4 id="尾随逗号">4.2 尾随逗号</h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>参数列表、集合末尾允许逗号。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>代码格式化。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>语法糖，无运行时影响。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> list = listOf(</span><br><span class="line">    <span class="number">1</span>,</span><br><span class="line">    <span class="number">2</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>兼容性</strong>：旧版本不支持。</li>
<li><strong>一致性</strong>：团队需统一风格。</li>
</ul></li>
</ul>
<hr />
<h3 id="kotlin-1.5">5. Kotlin 1.5</h3>
<h4 id="密封接口sealed-interface">5.1
密封接口：<code>sealed interface</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>使用 <code>sealed interface</code> 限制实现类。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>模式匹配。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译器检查实现。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">sealed</span> <span class="keyword">interface</span> <span class="title class_">Expr</span></span><br><span class="line"><span class="keyword">data</span> <span class="keyword">class</span> <span class="title class_">Num</span>(<span class="keyword">val</span> value: <span class="built_in">Int</span>) : Expr</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> expr: Expr = Num(<span class="number">42</span>)</span><br><span class="line">    println((expr <span class="keyword">as</span> Num).value)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>范围</strong>：实现类需在同一模块。</li>
<li><strong>版本</strong>：需 1.5+。</li>
</ul></li>
</ul>
<h4 id="内联值类value-class">5.2 内联值类：<code>value class</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>使用 <code>value class</code> 定义单值类。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>类型安全。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译时展开。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">value <span class="keyword">class</span> <span class="title class_">Password</span>(<span class="keyword">val</span> value: String)</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> pwd = Password(<span class="string">&quot;secret&quot;</span>)</span><br><span class="line">    println(pwd.value)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>限制</strong>：单一属性。</li>
<li><strong>兼容性</strong>：需 1.5+。</li>
</ul></li>
</ul>
<hr />
<h3 id="kotlin-1.6">6. Kotlin 1.6</h3>
<h4 id="挂起函数类型suspend---unit">6.1
挂起函数类型：<code>suspend () -&gt; Unit</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>定义挂起函数类型。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>协程回调。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为续体类型。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> suspendFunc: <span class="keyword">suspend</span> () -&gt; <span class="built_in">Unit</span> = &#123; println(<span class="string">&quot;Suspended&quot;</span>) &#125;</span><br><span class="line">    <span class="comment">// 需要协程作用域调用</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>调用</strong>：需协程作用域。</li>
<li><strong>版本</strong>：需 1.6+。</li>
</ul></li>
</ul>
<hr />
<h3 id="kotlin-1.8">7. Kotlin 1.8</h3>
<h4 id="上下文接收者context">7.1 上下文接收者：<code>context</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>使用 <code>context(Type)</code> 指定接收者。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>DSL 设计。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为隐式参数。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">context(String)</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">printWithContext</span><span class="params">()</span></span> = println(<span class="keyword">this</span>)</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    with(<span class="string">&quot;Hello&quot;</span>) &#123; printWithContext() &#125;  <span class="comment">// Hello</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>实验性</strong>：需启用特性。</li>
<li><strong>复杂度</strong>：增加理解难度。</li>
</ul></li>
</ul>
<hr />
<h3 id="kotlin-1.9">8. Kotlin 1.9+</h3>
<h4 id="多平台改进">8.1 多平台改进</h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>使用 <code>expect</code> 和 <code>actual</code>
定义跨平台代码。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>多平台开发。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译器生成平台特定代码。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">expect</span> <span class="keyword">class</span> <span class="title class_">Platform</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">name</span><span class="params">()</span></span>: String</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">actual</span> <span class="keyword">class</span> <span class="title class_">Platform</span> <span class="title">actual</span> <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">actual</span> <span class="function"><span class="keyword">fun</span> <span class="title">name</span><span class="params">()</span></span> = <span class="string">&quot;JVM&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    println(Platform().name())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>配置</strong>：需多平台项目设置。</li>
<li><strong>一致性</strong>：实现需匹配。</li>
</ul></li>
</ul>
<h4 id="k2-编译器特性">8.2 K2 编译器特性</h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>K2 是新编译器，提升性能。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>更快编译、更严格检查。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>重写编译流程。</li>
</ul></li>
<li><strong>示例代码</strong>：
<ul>
<li>无特定语法，仅编译器特性。</li>
</ul></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>稳定性</strong>：仍在完善。</li>
<li><strong>启用</strong>：需配置。</li>
</ul></li>
</ul>
<hr />
<h2 id="三其他特性">三、其他特性</h2>
<h3 id="标准库扩展">1. 标准库扩展</h3>
<h4 id="集合list-set-map">1.1 集合：<code>List</code>, <code>Set</code>,
<code>Map</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li><code>listOf()</code>：不可变列表。</li>
<li><code>setOf()</code>：不可变集合。</li>
<li><code>mapOf()</code>：不可变映射。</li>
<li>可变版本：<code>mutableListOf()</code>, <code>mutableSetOf()</code>,
<code>mutableMapOf()</code>。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>数据存储、查询。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>基于 Java 集合类（如 <code>ArrayList</code>, <code>HashSet</code>,
<code>HashMap</code>）。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> list = listOf(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">    <span class="keyword">val</span> <span class="keyword">set</span> = setOf(<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>)  <span class="comment">// [1, 2]</span></span><br><span class="line">    <span class="keyword">val</span> map = mapOf(<span class="string">&quot;a&quot;</span> to <span class="number">1</span>, <span class="string">&quot;b&quot;</span> to <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">val</span> mutableList = mutableListOf(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">    mutableList.add(<span class="number">3</span>)</span><br><span class="line">    println(<span class="string">&quot;<span class="variable">$list</span>, <span class="variable">$set</span>, <span class="variable">$map</span>, <span class="variable">$mutableList</span>&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>不可变性</strong>：<code>listOf()</code> 不支持修改。</li>
<li><strong>性能</strong>：选择合适集合类型。</li>
</ul></li>
</ul>
<h4 id="字符串string-stringbuilder">1.2 字符串：<code>String</code>,
<code>StringBuilder</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li><code>String</code>：不可变字符串。</li>
<li><code>StringBuilder</code>：可变字符串缓冲区。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>文本处理、动态拼接。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li><code>String</code> 映射到 <code>java.lang.String</code>。</li>
<li><code>StringBuilder</code> 使用
<code>java.lang.StringBuilder</code>。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> str = <span class="string">&quot;Hello&quot;</span></span><br><span class="line">    <span class="keyword">val</span> sb = StringBuilder().append(<span class="string">&quot;Hello&quot;</span>).append(<span class="string">&quot; World&quot;</span>)</span><br><span class="line">    println(<span class="string">&quot;<span class="variable">$str</span>, <span class="subst">$&#123;sb.toString()&#125;</span>&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>性能</strong>：大量拼接用 <code>StringBuilder</code>。</li>
<li><strong>不可变性</strong>：<code>String</code> 修改生成新对象。</li>
</ul></li>
</ul>
<h4 id="iojava.io">1.3 IO：<code>java.io</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>使用 Java 的 IO 类（如 <code>File</code>）。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>文件读写。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>直接调用 Java IO 库。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    File(<span class="string">&quot;test.txt&quot;</span>).writeText(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line">    println(File(<span class="string">&quot;test.txt&quot;</span>).readText())  <span class="comment">// Hello</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>异常</strong>：需处理 IO 异常。</li>
<li><strong>资源</strong>：确保关闭流。</li>
</ul></li>
</ul>
<h4 id="并发kotlin.coroutines">1.4
并发：<code>kotlin.coroutines</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>使用 <code>kotlinx.coroutines</code> 提供协程支持。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>异步任务、并发处理。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>基于状态机和续体。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> kotlinx.coroutines.*</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> = runBlocking &#123;</span><br><span class="line">    launch &#123;</span><br><span class="line">        delay(<span class="number">1000L</span>)</span><br><span class="line">        println(<span class="string">&quot;World&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    println(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>依赖</strong>：需添加库。</li>
<li><strong>取消</strong>：注意协程生命周期。</li>
</ul></li>
</ul>
<hr />
<h3 id="反射与运行时">2. 反射与运行时</h3>
<h4 id="类引用class">2.1 类引用：<code>::class</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>获取类的 <code>KClass</code> 对象。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>反射、元编程。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>返回运行时类引用。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> ref = String::<span class="keyword">class</span></span><br><span class="line">    <span class="title class_">println</span>(ref.simpleName)  <span class="comment">// String</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>性能</strong>：反射开销大。</li>
<li><strong>类型</strong>：区分 <code>::class</code> 和
<code>::class.java</code>。</li>
</ul></li>
</ul>
<h4 id="函数引用function">2.2 函数引用：<code>::function</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>获取函数引用。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>函数式编程。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为函数对象。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">hello</span><span class="params">()</span></span> = println(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> ref = ::hello</span><br><span class="line">    ref()  <span class="comment">// Hello</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>适用性</strong>：仅限顶层或成员函数。</li>
<li><strong>性能</strong>：避免频繁创建。</li>
</ul></li>
</ul>
<h4 id="反射库kotlin.reflect">2.3
反射库：<code>kotlin.reflect</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>使用 <code>kotlin.reflect</code> 访问类、属性等。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>动态检查。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>基于 JVM 反射。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> kotlin.reflect.full.memberProperties</span><br><span class="line"><span class="keyword">data</span> <span class="keyword">class</span> <span class="title class_">Person</span>(<span class="keyword">val</span> name: String)</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> props = Person::<span class="keyword">class</span>.memberProperties</span><br><span class="line">    println(props.map &#123; it.name &#125;)  <span class="comment">// [name]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>依赖</strong>：需添加 <code>kotlin-reflect</code>。</li>
<li><strong>开销</strong>：避免在性能敏感处使用。</li>
</ul></li>
</ul>
<hr />
<h3 id="委托">3. 委托</h3>
<h4 id="属性委托by-lazy-by-delegates">3.1
属性委托：<code>by lazy</code>, <code>by Delegates</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>使用 <code>by</code> 将属性委托给代理对象。</li>
<li><code>lazy</code>：延迟初始化，线程安全。</li>
<li><code>Delegates.observable</code>：属性变化监听。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li><code>lazy</code>：延迟加载资源。</li>
<li><code>observable</code>：状态监听（如 UI 更新）。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li><code>lazy</code>：编译为 <code>Lazy</code>
对象，首次访问时初始化。</li>
<li><code>observable</code>：使用 <code>ObservableProperty</code>
包装，调用回调。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> kotlin.properties.Delegates</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// lazy</span></span><br><span class="line">    <span class="keyword">val</span> lazyVal: String <span class="keyword">by</span> lazy &#123;</span><br><span class="line">        println(<span class="string">&quot;Computed&quot;</span>)</span><br><span class="line">        <span class="string">&quot;Lazy&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    println(lazyVal)  <span class="comment">// Computed, Lazy</span></span><br><span class="line">    println(lazyVal)  <span class="comment">// Lazy（不再计算）</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// observable</span></span><br><span class="line">    <span class="keyword">var</span> obsVal: String <span class="keyword">by</span> Delegates.observable(<span class="string">&quot;Init&quot;</span>) &#123; property, old, new -&gt;</span><br><span class="line">        println(<span class="string">&quot;<span class="subst">$&#123;property.name&#125;</span>: <span class="variable">$old</span> -&gt; <span class="variable">$new</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    obsVal = <span class="string">&quot;New&quot;</span>  <span class="comment">// obsVal: Init -&gt; New</span></span><br><span class="line">    obsVal = <span class="string">&quot;Final&quot;</span>  <span class="comment">// obsVal: New -&gt; Final</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong><code>lazy</code>
线程安全</strong>：默认同步，需明确模式（如
<code>LazyThreadSafetyMode.NONE</code>）。</li>
<li><strong><code>observable</code>
开销</strong>：每次赋值触发回调，注意性能。</li>
<li><strong>初始化</strong>：<code>lazy</code> 不可重新赋值。</li>
</ul></li>
</ul>
<h4 id="类委托by">3.2 类委托：<code>by</code></h4>
<ul>
<li><strong>语法说明</strong>：
<ul>
<li>使用 <code>by</code> 将接口实现委托给对象。</li>
</ul></li>
<li><strong>应用场景</strong>：
<ul>
<li>组合优于继承、代理模式。</li>
</ul></li>
<li><strong>底层原理</strong>：
<ul>
<li>编译为代理调用。</li>
</ul></li>
<li><strong>示例代码</strong>： <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Printer</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">print</span><span class="params">()</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PrinterImpl</span> : <span class="type">Printer</span> &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">print</span><span class="params">()</span></span> = println(<span class="string">&quot;Printing&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Delegator</span>(printer: Printer) : Printer <span class="keyword">by</span> printer</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> delegator = Delegator(PrinterImpl())</span><br><span class="line">    delegator.print()  <span class="comment">// Printing</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>注意事项</strong>：
<ul>
<li><strong>覆盖</strong>：委托后仍可重写方法。</li>
<li><strong>依赖</strong>：确保委托对象可靠。</li>
</ul></li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>Bruce Yao
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://cmder.github.io/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Kotlin/Kotlin.html" title="Kotlin">https://cmder.github.io/编程语言/Kotlin/Kotlin.html</a>
  </li>
  <li class="post-copyright-license">
      <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/Android/Framework/Android-Framework-%E5%BC%80%E5%8F%91.html" rel="prev" title="Android Framework 开发">
                  <i class="fa fa-angle-left"></i> Android Framework 开发
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/%E9%9F%B3%E8%A7%86%E9%A2%91/OpenGL/OpenGL.html" rel="next" title="OpenGL">
                  OpenGL <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2022 – 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Bruce Yao</span>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/cmder" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>

<script>
var options = {
  bottom: '64px',
  right: 'unset',
  left: '32px',
  time: '0.5s',
  mixColor: 'transparent',
  backgroundColor: 'transparent',
  buttonColorDark: '#100f2c',
  buttonColorLight: '#fff',
  saveInCookies: false,
  label: '🌓',
  autoMatchOsTheme: false
}
const darkmode = new Darkmode(options);
window.darkmode = darkmode;
darkmode.showWidget();
if (window.darkmode && !window.darkmode.isActivated()) {
  window.darkmode.toggle();
  var toggleButtons = document.getElementsByClassName("darkmode-toggle");
  if (toggleButtons && toggleButtons.length > 0) {
    for (i = 0; i < toggleButtons.length; i++) {
      toggleButtons[i].classList.add("darkmode-toggle--white");
    }
  }
}
</script>

</body>
</html>
